(this.webpackJsonplotus=this.webpackJsonplotus||[]).push([[0],{150:function(t,e,a){},167:function(t,e,a){},185:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(29),c=a.n(s),i=a(33),o=a(34),u=a(37),l=a(36),j=(a(150),a(151),a(86)),p=a(90);p.a.apps.length?p.a.app():p.a.initializeApp({apiKey:"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs",authDomain:"data-492da.firebaseapp.com",databaseURL:"https://data-492da.firebaseio.com",projectId:"data-492da",storageBucket:"data-492da.appspot.com",messagingSenderId:"381903672681",appId:"1:381903672681:web:813cffbc63da30d11f99f8",measurementId:"G-CD4W02BEZ7"});var d=p.a,h=d.auth();function b(t){h.onAuthStateChanged((function(e){return t(e)}))}var m=a(61),f=a(191),O=a(124),g=a(189),v=a(143),x=a(193),y=a(195),k=a(196),w=a(197),C=a.p+"static/media/lotus.3d5db4fb.png",I=a.p+"static/media/user.b326dd92.png",S=a(8),E=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).logout=function(){var t;t=function(t){return console.log(t)},h.signOut().then((function(e){return t(e)}))},n.login=function(){!function(t){var e=new d.auth.GoogleAuthProvider;h.signInWithPopup(e).then((function(e){return t(e)}))}((function(t){console.log(t)}))},n.state={avatar:I,user:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=this;b((function(e){null!=e?t.setState({avatar:e.photoURL,user:e}):t.setState({avatar:e,user:null})}))}},{key:"render",value:function(){var t=Object(S.jsx)(O.a,{children:null===this.state.user?Object(S.jsx)(O.a.Item,{icon:Object(S.jsx)(k.a,{}),onClick:this.login,children:"\u0110\u0103ng nh\u1eadp"},"menu-setting"):Object(S.jsx)(O.a.Item,{icon:Object(S.jsx)(w.a,{}),onClick:this.logout,children:"\u0110\u0103ng xu\u1ea5t"},"menu-logout")}),e=Object(S.jsx)(g.a,{overlay:t,placement:"topRight",children:Object(S.jsx)(v.a,{className:"dropdown-toggle mt-2",size:45,icon:Object(S.jsx)(x.a,{src:this.state.avatar,preview:!1}),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"})},"header-dropdown");return Object(S.jsx)(y.a,{className:"p-0",title:Object(S.jsx)(x.a,{width:45,height:45,src:C,preview:!1}),subTitle:Object(S.jsx)(j.b,{to:"/",children:"Home"}),extra:[e]})}}]),a}(n.Component),R=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return"Ant Design \xa92018 Created by Ant UED"}}]),a}(n.Component),z=a(26),D=a(85),L=a(53),N=a(192),U=a(115),A=a(84),M=a(142),B=a(194),G=a(190),P=a(200),F=d.database();function T(t,e){return F.ref(t).push(e).key}var _=d.storage();var Q=a(133),W=a(198),H=a(199),J=(a(167),function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).handleChange=function(t){t.saver.save().then((function(t){return n.setState({value:t})}))},n.reference=function(t){n.setState({editor:t})},n.submit=function(){n.props.submit&&(n.props.submit({comment:n.state.value,images:n.state.images}),n.state.editor.clear(),n.setState({images:[]}))},n.upload=function(t){if(n.state.images.length<9)for(var e=t.target.files,a=0;a<e.length;a++){var r=new FileReader;r.onload=function(t){if(n.state.images.length<9){var e=n.state.images;e.push({id:Date.now(),src:t.target.result}),e.forEach((function(t){1==e.length?t.size="100%":e.length>1&&e.length<=4?t.size="50%":e.length>4&&(t.size="33.33%")})),n.setState({images:e})}},r.readAsDataURL(e[a])}},n.state={value:{},editor:{},images:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var t=this.props.user;return Object(S.jsxs)(B.a,{actions:[Object(S.jsx)(W.a,{onClick:this.submit},"send"),Object(S.jsx)(H.a,{onClick:function(){return document.getElementById("editor-uploader").click()}},"img")],children:[Object(S.jsx)(G.a,{author:t.displayName,avatar:Object(S.jsx)(x.a,{src:t.photoURL,preview:!1})}),Object(S.jsx)("div",{className:"editor-container border",children:Object(S.jsx)(Q.a,{onChange:this.handleChange,instanceRef:this.reference})}),Object(S.jsx)(x.a.PreviewGroup,{children:this.state.images.map((function(t){return Object(S.jsx)(x.a,{width:t.size,src:t.src})}))}),Object(S.jsx)("input",{type:"file",id:"editor-uploader",accept:"image/png, image/gif, image/jpeg",onChange:this.upload,multiple:!0,hidden:!0})]})}}]),a}(n.Component)),V=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).submit=function(t){var e={userId:n.props.app.user.uid,author:n.props.app.user.displayName,avatar:n.props.app.user.photoURL,content:t.comment};T("/posts/".concat(n.props.data.key,"/comments/"),e)},n.delete=function(){var t,e;n.props.data.images.forEach((function(t){return e=t.src,void _.ref(e).delete().catch((function(t){return console.log(t)}));var e})),t="/posts/",e=n.props.data.key,F.ref(t).child(e).remove(),M.b.info("Xo\xe1 th\xe0nh c\xf4ng")},n.state={comments:[],comment:{time:1624457156027,blocks:[],version:"2.22.0"}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.data,a=this.props.app.user.uid===e.userId;return Object(S.jsx)(D.a,{justify:"center",className:"mb-4",children:Object(S.jsx)(L.a,{xl:16,lg:18,md:20,sm:22,xs:24,children:Object(S.jsxs)(B.a,{children:[Object(S.jsx)(D.a,{children:Object(S.jsxs)(L.a,{span:24,justify:"center",children:[Object(S.jsx)(G.a,{author:e.author,avatar:e.avatar,content:e.content,datetime:Object(S.jsx)(S.Fragment,{children:a&&Object(S.jsx)(P.a,{onClick:this.delete})})}),Object(S.jsx)(D.a,{justify:"center",children:Object(S.jsx)(L.a,{span:12,children:Object(S.jsx)(x.a.PreviewGroup,{children:e.images.map((function(t){return Object(S.jsx)(x.a,{width:t.size,src:t.link})}))})})})]})}),Object(S.jsx)(D.a,{children:Object(S.jsx)(L.a,{span:22,offset:1,children:e.comments.length>0&&Object(S.jsx)(N.b,{dataSource:e.comments,itemLayout:"horizontal",renderItem:function(e){var n=a||e.userId==t.props.app.user.uid;return console.log(n),Object(S.jsx)(N.b.Item,{children:Object(S.jsx)(G.a,Object(A.a)(Object(A.a)({},e),{},{datetime:n&&Object(S.jsx)(P.a,{})}))},e.key)}})})}),Object(S.jsx)(D.a,{children:Object(S.jsx)(L.a,{span:22,offset:1,children:Object(S.jsx)(J,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit})})})]})})})}}]),a}(n.Component),Z=Object(m.b)((function(t){return{app:t.app}}))(V),K=a(139),X=a.n(K);function Y(t){var e=[],a=function(a){var n=t[a],r=[],s=t[a].images;if(s)for(var c in s)r.push(s[c]);r.forEach((function(t){1==r.length?t.size="100%":r.length>1&&r.length<=4?t.size="50%":r.length>4&&(t.size="33.33%")}));var i={key:a,userId:n.userId,author:n.author,avatar:n.avatar,content:Object(S.jsx)(X.a,{data:n.content}),images:r};e.unshift(i)};for(var n in t)a(n);return e}var q=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).loadMore=function(){n.setState({number:n.state.number+1}),n.load()},n.submit=function(t){var e=T("/posts/",{userId:n.props.app.user.uid,author:n.props.app.user.displayName,avatar:n.props.app.user.photoURL,content:t.comment});t.images.forEach((function(t){var a,n,r,s="/image-posts/".concat(t.id,".png");a=s,n=t.src,r=function(t){return T("/posts/".concat(e,"/images/"),{src:s,link:t})},_.ref(a).putString(n,"data_url").then((function(t){if(r){var e=t._delegate.metadata.fullPath;_.ref(e).getDownloadURL().then((function(t){return r(t)}))}}))}))},n.state={posts:[],number:5},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var t,e,a,n=this;t="/posts/",e=this.state.number,a=function(t){var e=Y(t);e.forEach((function(e){return e.comments=Y(t[e.key].comments)})),n.setState({posts:e})},F.ref(t).limitToLast(e).on("value",(function(t){return a(t.val())}))}},{key:"render",value:function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(D.a,{justify:"center",className:"mb-4",children:Object(S.jsx)(L.a,{xl:12,lg:14,md:16,sm:18,xs:20,children:Object(S.jsx)(J,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit})})}),Object(S.jsx)(N.b,{dataSource:this.state.posts,loadMore:Object(S.jsx)(D.a,{align:"center",children:Object(S.jsx)(L.a,{children:Object(S.jsx)(U.a,{onClick:this.loadMore})})}),renderItem:function(t){return Object(S.jsx)(Z,{data:t},t.key)}})]})}}]),a}(n.Component),$=Object(m.b)((function(t){return{app:t.app}}))(q),tt=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsx)($,{},Date.now())}}]),a}(n.Component),et=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={user:null},n}return Object(o.a)(a,[{key:"render",value:function(){return null===this.props.app.user?Object(S.jsx)("div",{}):Object(S.jsx)(z.c,{children:Object(S.jsx)(z.a,{exact:!0,path:"/",component:tt},"home")})}}]),a}(n.Component),at=Object(m.b)((function(t){return{app:t.app}}))(et),nt=a(110),rt={user:{}},st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return t.user=e.data,Object(A.a)(Object(A.a)({},t),{},{user:e.data});default:return t}},ct=Object(nt.a)({app:st}),it=Object(nt.b)(ct),ot=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(i.a)(this,a),n=e.call(this,t),b((function(t){it.dispatch({data:t,type:"SET_USER"})})),n}return Object(o.a)(a,[{key:"render",value:function(){return Object(S.jsx)(m.a,{store:it,children:Object(S.jsx)(j.a,{children:Object(S.jsxs)(f.a,{className:"app",children:[Object(S.jsx)(f.a.Header,{style:{backgroundColor:"white"},children:Object(S.jsx)(E,{})}),Object(S.jsx)(f.a.Content,{className:"p-3",children:Object(S.jsx)(at,{})}),Object(S.jsx)(f.a.Footer,{style:{textAlign:"center"},children:Object(S.jsx)(R,{})})]})})})}}]),a}(n.Component);c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ot,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.5fc1aa96.chunk.js.map