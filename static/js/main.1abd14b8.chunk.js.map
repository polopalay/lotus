{"version":3,"sources":["services/firebase/firebase.js","services/firebase/auth.js","reducers/app/app.action.js","services/img/lotus.png","services/img/user.png","components/layout/Header.js","services/firebase/database.js","services/firebase/storage.js","services/helper/mapper.js","components/view/posts/Post.js","components/tool/Editor.js","components/tool/editorTools.js","components/view/posts/Posts.js","components/view/posts/Detail.js","reducers/app/app.reducer.js","reducers/root.reducer.js","store.js","components/view/user/Setting.js","components/layout/NotFound.js","components/Routing.js","components/view/user/Login.js","components/view/user/Logout.js","components/layout/AccessDenied.js","App.js","index.js"],"names":["firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getCurrentUser","currentUser","updateDisplayName","data","action","user","updateProfile","displayName","then","updatePhotoUrl","photoURL","setUser","type","Header","username","avatar","userImg","this","props","menu","Item","icon","HomeOutlined","to","uid","SettingOutlined","LogoutOutlined","LoginOutlined","dropdown","overlay","placement","className","shape","size","src","preview","id","data-toggle","aria-haspopup","aria-expanded","title","width","height","lotus","subTitle","Text","strong","extra","Component","connect","store","database","getRowOneTimeAsync","ref","a","once","rs","val","getRow","on","getRowByParrentIdOneTimeAsync","name","orderByChild","equalTo","getRowByParrentIdOneTime","addRow","push","result","key","deleteRow","child","remove","editRow","update","storage","uploadFileAsync","path","file","put","fullPath","_delegate","metadata","getDownloadURL","url","uploadFileFromStringAsync","string","putString","deleteByUrl","urls","forEach","replace","split","delete","mapOne","item","likes","lks","keyLike","userId","date","author","content","rawContent","mapData","dataset","map","unshift","toBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","error","Post","vote","post","state","comments","loading","bind","setState","parrentId","blocks","filter","includes","load","message","info","isWriter","liked","actions","CaretUpOutlined","onClick","CommentOutlined","onConfirm","okText","cancelText","DeleteOutlined","justify","xl","lg","md","sm","xs","datetime","span","LoadingOutlined","Editor","editor","uploadByFile","submit","uploadByUrl","EditorJS","holder","logLevel","tools","delimiter","Delimiter","paragraph","class","Paragraph","inlineToolbar","quote","Quote","marker","Marker","inlineCode","InlineCode","list","ListTool","image","ImageTool","config","uploader","save","base64regex","block","i","test","Date","now","comment","clear","success","SendOutlined","ClearOutlined","Posts","loadMore","number","match","params","posts","limitToLast","getRowFromLastOneTime","keys","prevProps","toDateString","Math","random","dataSource","align","DownOutlined","renderItem","Detail","isMount","postId","getRowByParrentId","offset","itemLayout","canDelete","deleteComment","initialState","template","combineReducers","createStore","Setting","finish","upLoadFile","event","dispatch","defaultActiveKey","centered","TabPane","tab","style","background","onFinish","wrapperCol","htmlType","fileList","beforeUpload","NotFound","status","Routing","exact","component","Login","provider","GoogleAuthProvider","signInWithPopup","loginWithGoogle","history","Logout","signOut","AccessDenied","App","onAuthStateChanged","backgroundColor","Content","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1abd14b8.chunk.js","sourcesContent":["import firebase from 'firebase/app';\n\nlet config = {\n    apiKey: \"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs\",\n    authDomain: \"data-492da.firebaseapp.com\",\n    databaseURL: \"https://data-492da.firebaseio.com\",\n    projectId: \"data-492da\",\n    storageBucket: \"data-492da.appspot.com\",\n    messagingSenderId: \"381903672681\",\n    appId: \"1:381903672681:web:813cffbc63da30d11f99f8\",\n    measurementId: \"G-CD4W02BEZ7\"\n};\n\nif (!firebase.apps.length) {\n    firebase.initializeApp(config);\n} else {\n    firebase.app();\n}\n\nexport default firebase;\n","import 'firebase/auth'\nimport firebase from './firebase';\n\nconst auth = firebase.auth();\n\nexport function onUserStateChange(action) {\n    auth.onAuthStateChanged((user) => action && action(user));\n}\n\nexport function getCurrentUser() {\n    return auth.currentUser;\n}\n\nexport function updateDisplayName(data, action) {\n    let user = firebase.auth().currentUser;\n    if (user) {\n        user.updateProfile({displayName: data}).then(() => action && action())\n    }\n}\n\nexport function updatePhotoUrl(data, action) {\n    let user = firebase.auth().currentUser;\n    if (user) {\n        user.updateProfile({photoURL: data}).then(() => action && action())\n    }\n}\n\nexport function loginWithGoogle(action) {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(rs => action && action(rs))\n}\n\nexport function signOut(action) {\n    auth.signOut().then(rs => action && action(rs))\n}\n\n","export const setUser = (data) => {\n    return {\n        data: data,\n        type: \"SET_USER\",\n    };\n};\n","export default __webpack_public_path__ + \"static/media/lotus.3d5db4fb.png\";","export default __webpack_public_path__ + \"static/media/user.b326dd92.png\";","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link} from 'react-router-dom';\nimport {Menu, PageHeader, Dropdown, Avatar, Image, Typography} from 'antd';\nimport {SettingOutlined, LogoutOutlined, LoginOutlined, HomeOutlined} from \"@ant-design/icons\";\nimport lotus from '../../services/img/lotus.png'\nimport userImg from '../../services/img/user.png'\n\nclass Header extends Component {\n  render() {\n    let avatar = userImg;\n    let username;\n    if (this.props.app.user) {\n      avatar = this.props.app.user.photoURL;\n      username = this.props.app.user.displayName\n    }\n\n    const menu = (\n      <Menu>\n        {this.props.app.user ?\n          <>\n            <Menu.Item icon={<HomeOutlined />} key=\"menu-home\">\n              <Link to={`/user/${this.props.app.user.uid}`}>Trang cá nhân</Link>\n            </Menu.Item>\n            <Menu.Item icon={<SettingOutlined />} key=\"menu-setting\">\n              <Link to='/setting'>Cài Đặt</Link>\n            </Menu.Item>\n            <Menu.Item icon={<LogoutOutlined />} key=\"menu-logout\">\n              <Link to='/logout'>Đăng xuất</Link>\n            </Menu.Item>\n          </>\n          :\n          <Menu.Item icon={<LoginOutlined />} key=\"menu-setting\">\n            <Link to='/login'>Đăng nhập</Link>\n          </Menu.Item>\n        }\n      </Menu>\n    );\n    const dropdown = (\n      <Dropdown overlay={menu} placement=\"topRight\" key=\"header-dropdown\">\n        <Avatar\n          className=\"dropdown-toggle mt-2\"\n          shape=\"square\"\n          size={45}\n          icon={<Image src={avatar} preview={false} />}\n          id=\"dropdownMenuButton\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        />\n      </Dropdown>\n    );\n    return (\n      <PageHeader className=\"p-0 m-0\" title={<Image width={45} height={45} src={lotus} preview={false} />}\n        subTitle={<Typography.Text key='home' strong><Link className='text-volcano' to='/'>Home</Link></Typography.Text>}\n        extra={[<Typography.Text key='username' strong>{username}</Typography.Text>,\n          dropdown]} />\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Header);\n\n","import 'firebase/database';\nimport firebase from './firebase'\n\nconst database = firebase.database();\nexport async function getRowOneTimeAsync(ref) {\n    let rs = await database.ref(ref).once('value');\n    return rs.val();\n}\nexport function getRowOneTime(ref, action) {\n    database.ref(ref).once('value').then(rs => action(rs.val()))\n}\nexport function getRow(ref, action) {\n    database.ref(ref).on('value', rs => action(rs.val()))\n}\nexport function getRowFromLastOneTime(ref, number, action) {\n    database.ref(ref).limitToLast(number).once('value').then(rs => action(rs.val()))\n}\nexport function getRowFromFirst(ref, number, action) {\n    database.ref(ref).limitToFirst(number).on('value', rs => action(rs.val()))\n}\nexport function getRowFromLast(ref, number, action) {\n    database.ref(ref).limitToLast(number).on('value', rs => action(rs.val()))\n}\nexport function getRowByParrentIdFromLastOneTime(ref, number, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).limitToLast(number).once('value').then(rs => action && action(rs.val()))\n}\nexport async function getRowByParrentIdOneTimeAsync(ref, name, id) {\n    let rs = await database.ref(ref).orderByChild(name).equalTo(id).once('value')\n    return rs.val();\n}\nexport function getRowByParrentIdOneTime(ref, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).once('value').then(rs => action && action(rs.val()))\n}\nexport function getRowByParrentId(ref, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).on('value', rs => action && action(rs.val()))\n}\nexport function addRow(ref, data, action) {\n    let rs = database.ref(ref).push(data)\n    rs.then(result => action && action(result))\n    return rs.key;\n}\nexport function deleteRow(ref, id, action) {\n    database.ref(ref).child(id).remove().then(rs => action && action(rs))\n}\nexport function editRow(ref, id, data, action) {\n    database.ref(ref).child(id).update(data).then(rs => action && action(rs))\n}\n","import 'firebase/storage';\nimport firebase from './firebase'\n\nconst storage = firebase.storage();\n\nexport async function uploadFileAsync(path, file) {\n    let ref = storage.ref(path);\n    let rs = await ref.put(file)\n    let fullPath = rs._delegate.metadata.fullPath;\n    let url = await storage.ref(fullPath).getDownloadURL()\n    return {fullPath, url};\n}\nexport function uploadFile(path, file, action) {\n    let ref = storage.ref(path);\n    ref.put(file).then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    });\n}\nexport async function uploadFileFromStringAsync(path, string) {\n    let ref = storage.ref(path);\n    let rs = await ref.putString(string, 'data_url')\n    let fullPath = rs._delegate.metadata.fullPath;\n    let url = await storage.ref(fullPath).getDownloadURL()\n    return {fullPath, url};\n}\nexport function uploadFileFromString(path, string, action) {\n    let ref = storage.ref(path);\n    ref.putString(string, 'data_url').then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    })\n}\nexport function deleteFile(path) {\n    storage.ref(path).delete().catch(error => console.log(error));\n}\nexport function deleteByUrl(urls) {\n    urls.forEach(url => {\n        url = url.replace('https://firebasestorage.googleapis.com/v0/b/data-492da.appspot.com/o/images%2F', '')\n        url = url.split('?')\n        storage.ref(`/images/${url[0]}`).delete()\n    })\n}\n","import Output from 'editorjs-react-renderer';\nimport {Link} from 'react-router-dom'\nimport {Image, Avatar} from 'antd'\n\nexport function mapOne(item, key) {\n\tlet likes = []\n\tlet lks = item.likes;\n\tif (lks) {\n\t\tfor (let keyLike in lks) {\n\t\t\tlikes.push(lks[keyLike].uid);\n\t\t}\n\t}\n\treturn {\n\t\tkey: key,\n\t\tuid: item.userId,\n\t\tdate: item.date,\n\t\tauthor: item.author,\n\t\tavatar: <Link to={`/user/${item.userId}`}><Avatar icon={<Image src={item.avatar} preview={false} />} /></Link>,\n\t\tcontent: <Output data={item.content} />,\n\t\trawContent: item.content,\n\t\tlikes: likes\n\t}\n}\nexport function mapData(data) {\n\tlet dataset = []\n\tfor (let key in data) {\n\t\tif (data[key]) {\n\t\t\tlet map = mapOne(data[key], key);\n\t\t\tdataset.unshift(map);\n\t\t}\n\t}\n\treturn dataset;\n}\n\nexport function toBase64(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(file);\n\t\treader.onload = () => resolve(reader.result);\n\t\treader.onerror = error => reject(error);\n\t})\n};\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link} from 'react-router-dom';\nimport {Comment, Row, Col, Card, Popconfirm, message} from 'antd';\nimport {DeleteOutlined, CommentOutlined, CaretUpOutlined, LoadingOutlined} from \"@ant-design/icons\";\nimport {getRowOneTimeAsync, getRowByParrentIdOneTime, getRow, deleteRow, addRow} from '../../../services/firebase/database'\nimport {deleteByUrl} from '../../../services/firebase/storage';\nimport {mapOne} from '../../../services/helper/mapper'\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {comments: [], post: null, loading: true}\n    this.delete = this.delete.bind(this)\n  }\n  componentDidMount() {\n    getRow(`/posts/${this.props.data}`, rs => {\n      if (rs) {\n        this.setState({post: mapOne(rs, this.props.data), loading: false});\n      }\n    })\n  }\n  async delete() {\n    let parrentId = this.props.data\n    let rs = await getRowOneTimeAsync(`/posts/${parrentId}`)\n    let images = rs.content.blocks.filter(item => item.type === 'image').map(item => item.data.file.url)\n      .filter(item => item.includes('firebasestorage.googleapis.com'));\n    deleteByUrl(images);\n    deleteRow('/posts/', parrentId, () => {\n      getRowByParrentIdOneTime('/comments/', 'postId', parrentId, comments => {\n        for (let key in comments) {\n          deleteRow('/comments/', key)\n          let imgs = comments[key].content.blocks.filter(item => item.type === 'image').map(item => item.data.file.url)\n            .filter(item => item.includes('firebasestorage.googleapis.com'));\n          deleteByUrl(imgs);\n        }\n      })\n      this.props.load()\n      message.info('Xoá thành công');\n    });\n  }\n  vote = (post) => {\n    getRowByParrentIdOneTime(`/posts/${post.key}/likes`, 'uid', this.props.app.user.uid, rs => {\n      if (rs) {\n        for (let key in rs) {\n          deleteRow(`/posts/${post.key}/likes`, key, null)\n        }\n      } else {\n        addRow(`/posts/${post.key}/likes`, {uid: this.props.app.user.uid}, null);\n      }\n    })\n  }\n  render() {\n    let post = this.state.post\n    if (this.state.post) {\n      let uid = this.props.app.user.uid\n      let isWriter = uid === post.uid\n      let liked = post.likes.includes(uid)\n      let actions = [\n        <div className='flex-center' key='like'><CaretUpOutlined className={`action-icon mr-1 ${liked && \"text-volcano\"}`}\n          onClick={() => this.vote(post)} />{<p className='number-like-action'>{post.likes.length}</p>}</div>,\n        <Link to={`/detail/${post.key}`} key='comments'><CommentOutlined className='action-icon text-mute' /></Link>,\n      ]\n      isWriter && actions.push(\n        <Popconfirm title=\"Bạn có muốn xoá bài viết này không?\" onConfirm={this.delete} okText=\"Có\" cancelText=\"Không\" key='delete'>\n          <DeleteOutlined className='action-icon' />\n        </Popconfirm>)\n      return (\n        <Row justify=\"center\" className='mb-4'>\n          <Col xl={10} lg={14} md={18} sm={22} xs={24}>\n            <Card actions={actions} title={\n              <Comment author={<p className='author-name'>{post.author}</p>} avatar={post.avatar} datetime={post.date} />\n            }>\n              <Row>\n                <Col span={24} justify=\"center\">\n                  {post.content}\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      );\n    } else {\n      return <LoadingOutlined />;\n    }\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Post);\n\n","import React, {Component} from \"react\";\n//import EditorJs from 'react-editor-js';\nimport EditorJS from '@editorjs/editorjs';\nimport {Comment, Card, Image} from 'antd';\nimport {uploadFileFromStringAsync} from '../../services/firebase/storage';\nimport {ClearOutlined, SendOutlined} from \"@ant-design/icons\";\nimport {toBase64} from '../../services/helper/mapper';\nimport {editorTools} from './editorTools';\n\nexport default class Editor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {editor: null}\n\t\tthis.uploadByFile = this.uploadByFile.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tconst editor = new EditorJS({\n\t\t\tholder: this.props.id,\n\t\t\tlogLevel: 'ERROR',\n\t\t\ttools: editorTools(this.uploadByFile, this.uploadByUrl)\n\t\t});\n\t\tthis.setState({editor: editor})\n\t}\n\tasync submit() {\n\t\tif (this.props.submit) {\n\t\t\tconst content = await this.state.editor.save()\n\t\t\tconst base64regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n\t\t\tconst blocks = content.blocks.filter(block => block.type === 'image')\n\t\t\tfor (let i = 0; i < blocks.length; i++) {\n\t\t\t\tconst block = blocks[i];\n\t\t\t\tif (base64regex.test(block.data.file.url.replace(/^data:image\\/[a-z]+;base64,/, \"\"))) {\n\t\t\t\t\tconst rs = await uploadFileFromStringAsync(`/images/${Date.now()}`, block.data.file.url);\n\t\t\t\t\tblock.data.file.url = rs.url\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.props.submit({comment: content})\n\t\t\tthis.state.editor.clear();\n\t\t}\n\t}\n\tasync uploadByFile(file) {\n\t\tlet data = await toBase64(file);\n\t\treturn {\n\t\t\tsuccess: 1,\n\t\t\tfile: {\n\t\t\t\turl: data\n\t\t\t}\n\t\t}\n\t}\n\tasync uploadByUrl(url) {\n\t\treturn {\n\t\t\tsuccess: 1,\n\t\t\tfile: {\n\t\t\t\turl: url\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\tconst user = this.props.user;\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tactions={[\n\t\t\t\t\t<SendOutlined key='send' onClick={this.submit} className='action-icon' />,\n\t\t\t\t\t<ClearOutlined key='img' className='action-icon' onClick={() => this.state.editor.clear()} />,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Comment author={<p className='author-name'>{user.displayName}</p>} avatar={<Image src={user.photoURL} preview={false} />} />\n\t\t\t\t<div className='editor-container border mb-2' id={this.props.id}>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t)\n\t}\n}\n","import Paragraph from '@editorjs/paragraph';\nimport ImageTool from '@editorjs/image';\nimport Quote from '@editorjs/quote';\nimport Marker from '@editorjs/marker';\nimport InlineCode from '@editorjs/inline-code';\nimport ListTool from '@editorjs/list';\nimport Delimiter from '@editorjs/delimiter';\n\nexport function editorTools(uploadByFile, uploadByUrl) {\n    return {\n        delimiter: Delimiter,\n        paragraph: {class: Paragraph, inlineToolbar: true},\n        quote: {class: Quote, inlineToolbar: true},\n        marker: Marker,\n        inlineCode: InlineCode,\n        list: {class: ListTool, inlineToolbar: true},\n        image: {\n            class: ImageTool,\n            config: {uploader: {uploadByFile: uploadByFile, uploadByUrl: uploadByUrl}}\n        },\n    }\n}\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Row, Col, List} from \"antd\";\nimport {DownOutlined} from \"@ant-design/icons\";\nimport Post from \"./Post\";\nimport Editor from \"../../tool/Editor\";\nimport {addRow, getRowFromLastOneTime, getRowByParrentIdFromLastOneTime} from \"../../../services/firebase/database\";\n\nclass Posts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {posts: [], number: 5};\n    this.submit = this.submit.bind(this);\n  }\n  componentDidMount() {\n    this.load();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.uid !== this.props.match.params.uid) {\n      this.load();\n    }\n  }\n  loadMore = () => {\n    this.setState({number: this.state.number + 5});\n    this.load();\n  };\n  load = () => {\n    if (this.props.match.params.uid) {\n      getRowByParrentIdFromLastOneTime(\"/posts/\", this.state.number, 'userId', this.props.match.params.uid, (rs) => {\n        this.setState({posts: this.posts(rs)})\n      });\n    } else {\n      getRowFromLastOneTime(\"/posts/\", this.state.number, (rs) => {\n        this.setState({posts: this.posts(rs)})\n      });\n    }\n  }\n  posts = (data) => {\n    let keys = []\n    for (let key in data) {\n      keys.unshift(key)\n    }\n    return keys;\n  }\n  async submit(data) {\n    let post = {\n      userId: this.props.app.user.uid,\n      author: this.props.app.user.displayName,\n      avatar: this.props.app.user.photoURL,\n      content: data.comment,\n      date: new Date().toDateString()\n    };\n    addRow(\"/posts/\", post);\n    this.load()\n  };\n  render() {\n    return (\n      <>\n        <Row justify=\"center\" className=\"mb-4\">\n          <Col xl={10} lg={14} md={18} sm={22} xs={24}>\n            <Editor key={Math.random()} user={this.props.app.user}  submit={this.submit} id='post-edtior'/>\n          </Col>\n        </Row>\n        <List\n          dataSource={this.state.posts}\n          loadMore={<Row align=\"center\"><Col><DownOutlined onClick={this.loadMore} /></Col></Row>}\n          renderItem={(item) => <Post key={item} data={item} load={this.load} />}\n        />\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Posts);\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Comment, Row, Col, Card, Popconfirm, message, List} from 'antd';\nimport {DeleteOutlined} from \"@ant-design/icons\";\nimport {getRow, addRow, deleteRow, getRowByParrentId} from '../../../services/firebase/database'\nimport {deleteByUrl} from '../../../services/firebase/storage';\nimport {mapOne, mapData} from '../../../services/helper/mapper'\nimport Editor from '../../tool/Editor'\n\nclass Detail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {post: {}, comments: [], loading: true}\n  }\n  isMount = false;\n  componentDidMount() {\n    let id = this.props.match.params.id\n    getRow(`/posts/${id}`, rs => {\n      if (rs) {\n        this.setState({loading: false, post: mapOne(rs, id)})\n      }\n    })\n    getRowByParrentId('/comments/', 'postId', id, rs => {\n      this.setState({comments: mapData(rs)})\n    })\n  }\n  submit = (data) => {\n    let comment = {\n      postId: this.props.match.params.id,\n      userId: this.props.app.user.uid,\n      author: this.props.app.user.displayName,\n      avatar: this.props.app.user.photoURL,\n      content: data.comment,\n      date: new Date().toDateString()\n    }\n    addRow('/comments/', comment)\n  }\n  delete = () => {\n    deleteRow('/posts/', this.props.data.key);\n  }\n  deleteComment(id, content) {\n    let images = content.blocks.filter(item => item.type === 'image').map(item => item.data.file.url).filter(item => item.includes('firebasestorage.googleapis.com'));\n    deleteByUrl(images);\n    deleteRow(`/comments/`, id);\n    message.info('Xoá thành công');\n  }\n  render() {\n    let post = this.state.post\n    let isWriter = this.props.app.user.uid === post.uid\n    if (this.state.loading) {return ''}\n    return (\n      <Row justify=\"center\" className='mb-4'>\n        <Col xl={16} lg={18} md={20} sm={22} xs={24}>\n          <Card title={<Comment author={post.author} avatar={post.avatar} datetime={post.date} />}>\n            <Row>\n              <Col span={24} justify=\"center\">\n                {post.content}\n              </Col>\n            </Row>\n            <Row>\n              <Col span={22} offset={1}>\n                <Editor key={post.key} id={post.key} user={this.props.app.user} submit={this.submit} />\n              </Col>\n            </Row>\n            <Row>\n              {\n                <Col span={22} offset={1}>\n                  {\n                    this.state.comments.length > 0 &&\n                    <List\n                      dataSource={this.state.comments}\n                      itemLayout=\"horizontal\"\n                      renderItem={props => {\n                        let canDelete = isWriter || props.uid === this.props.app.user.uid\n                        return <List.Item key={Math.random()}>\n                          <Col span={24} justify=\"center\">\n                            <Comment author={props.author} avatar={props.avatar} content={props.content}\n                              datetime={canDelete &&\n                                <Popconfirm title=\"Bạn có muốn xoá bài viết này không?\" onConfirm={() => this.deleteComment(props.key, props.rawContent)}\n                                  okText=\"Có\" cancelText=\"Không\" >\n                                  <DeleteOutlined />\n                                </Popconfirm>\n                              } />\n                          </Col>\n                        </List.Item>\n                      }\n                      }\n                    />\n                  }\n                </Col>\n              }\n            </Row>\n          </Card>\n        </Col>\n      </Row>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Detail);\n","const initialState = {\n  user: {}\n};\n\nconst template = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_USER\":\n      state.user = action.data;\n      return {...state, user: action.data};\n    default:\n      return state;\n  }\n};\n\nexport default template;\n","import {combineReducers} from 'redux';\nimport app from './app/app.reducer';\nexport default combineReducers({app});\n","import {createStore} from 'redux';\nimport combineReducers from './reducers/root.reducer';\n\nexport default createStore(combineReducers);\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport store from '../../../store';\nimport {setUser} from '../../../reducers/app/app.action'\nimport {Tabs, Avatar, Card, Image, Col, Row, Form, Input, Button, Upload, message} from 'antd'\nimport {getRowByParrentIdOneTimeAsync, editRow} from '../../../services/firebase/database';\nimport {updateDisplayName, updatePhotoUrl, getCurrentUser} from '../../../services/firebase/auth'\nimport {uploadFileAsync} from '../../../services/firebase/storage'\nclass Setting extends Component {\n  constructor(props) {\n    super(props);\n    this.finish = this.finish.bind(this);\n    this.upLoadFile = this.upLoadFile.bind(this);\n  }\n  async finish(event) {\n    let rs = await getRowByParrentIdOneTimeAsync('/posts/', 'userId', this.props.app.user.uid)\n    for (let key in rs) {\n      let post = rs[key];\n      post.author = event.username;\n      editRow('/posts/', key, post, null);\n    }\n    updateDisplayName(event.username, () => {\n      store.dispatch(setUser(getCurrentUser()))\n      message.success('Cập nhật thành công');\n    })\n  }\n  async upLoadFile(file) {\n    let rs = await uploadFileAsync(`/avatar/${this.props.app.user.uid}.png`, file)\n    let result = await getRowByParrentIdOneTimeAsync('/posts/', 'userId', this.props.app.user.uid)\n    for (let key in result) {\n      let post = result[key];\n      post.avatar = rs.url;\n      editRow('/posts/', key, post, null);\n    }\n    updatePhotoUrl(rs.url, () => {\n      store.dispatch(setUser(getCurrentUser()))\n      message.success('Cập nhật thành công');\n    })\n  }\n  render() {\n    return (\n      <Row justify='center'>\n        <Col>\n          <Tabs defaultActiveKey=\"1\" centered>\n            <Tabs.TabPane tab=\"Đổi tên người dùng\" key=\"1\">\n              <Card style={{width: 300, background: 'none'}}>\n                <Form size='middle' onFinish={this.finish}>\n                  <Form.Item name=\"username\">\n                    <Input />\n                  </Form.Item>\n\n                  <Form.Item wrapperCol={{offset: 3, span: 16}}>\n                    <Button type=\"primary\" htmlType=\"submit\"> Cập nhật tên người dùng </Button>\n                  </Form.Item>\n                </Form>\n              </Card>\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Đổi ảnh đại diện\" key=\"2\">\n              <Card style={{width: 300, background: 'none'}}>\n                <Row justify='center'>\n                  <Col>\n                    <Avatar size={250} icon={<Image src={this.props.app.user.photoURL} preview={false} />} />\n                    <Row className='pt-3' justify='center'>\n                      <Col>\n                        <Upload fileList={[]} beforeUpload={(file) => {this.upLoadFile(file); return false;}}>\n                          <Button type='primary'>Cập nhật ảnh đại diện</Button>\n                        </Upload>\n                      </Col>\n                    </Row>\n                  </Col>\n                </Row >\n              </Card>\n            </Tabs.TabPane>\n          </Tabs>\n        </Col>\n      </Row >\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Setting);\n\n","import React, {Component} from \"react\";\nimport {Link} from 'react-router-dom'\nimport {Result, Button} from 'antd'\n\nexport default class NotFound extends Component {\n   render() {\n      return <Result\n         status=\"404\"\n         title=\"404\"\n         subTitle=\"Không tìm thấy trang yêu cầu!\"\n         extra={<Button type='primary'><Link to=\"/\">Về trang chủ</Link></Button>}\n      />\n   }\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport Posts from \"./view/posts/Posts\";\nimport Detail from \"./view/posts/Detail\";\nimport Setting from \"./view/user/Setting\";\nimport NotFound from \"./layout/NotFound\";\n\nclass Routing extends Component {\n  render() {\n    return this.props.app.user == null ? (\n      <Redirect to=\"/accessDenied\" />\n    ) : (\n      <Switch>\n        <Route exact path=\"/\" component={Posts} />\n        <Route exact path=\"/user/:uid\" component={Posts} />\n        <Route exact path=\"/detail/:id\" component={Detail} />\n        <Route exact path=\"/setting\" component={Setting} />\n        <Route component={NotFound} />\n      </Switch>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Routing);\n","import {Component} from \"react\";\nimport {loginWithGoogle} from '../../../services/firebase/auth';\n\nexport default class Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tloginWithGoogle(() => this.props.history.push('/'));\n\t}\n\trender() {\n\t\treturn '';\n\t}\n}\n","import { Component } from \"react\";\nimport { signOut } from \"../../../services/firebase/auth\";\n\nexport default class Logout extends Component {\n  constructor(props) {\n    super(props);\n    signOut(() => this.props.history.push(\"/accessDenied\"));\n  }\n  render() {\n    return \"\";\n  }\n}\n","import React, {Component} from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {Result} from 'antd';\n\nclass AccessDenied extends Component {\n\trender() {\n\t\treturn this.props.app.user == null ? <Result status=\"403\" title=\"403\" subTitle=\"Bạn chưa đăng nhập!\" /> : <Redirect to='/' />;\n\t}\n}\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(AccessDenied);\n","import \"./css/app.scss\";\nimport \"antd/dist/antd.css\";\nimport React, { Component } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport { onUserStateChange } from \"./services/firebase/auth\";\nimport { setUser } from \"./reducers/app/app.action\";\nimport { Provider } from \"react-redux\";\nimport { Layout } from \"antd\";\nimport Header from \"./components/layout/Header\";\nimport Routing from \"./components/Routing\";\nimport Login from \"./components/view/user/Login\";\nimport Logout from \"./components/view/user/Logout\";\nimport AccessDenied from \"./components/layout/AccessDenied\";\nimport store from \"./store\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    onUserStateChange((user) => {\n      store.dispatch(setUser(user));\n    });\n  }\n  render() {\n    return (\n      <Provider store={store}>\n        <HashRouter>\n          <Layout className=\"app\">\n            <Layout.Header\n              className=\"px-3\"\n              style={{ backgroundColor: \"white\" }}\n            >\n              <Header />\n            </Layout.Header>\n            <Layout.Content className=\"p-3\">\n              <Switch>\n                <Route exact path=\"/login\" component={Login} />\n                <Route exact path=\"/logout\" component={Logout} />\n                <Route exact path=\"/accessDenied\" component={AccessDenied} />\n                <Route path=\"/\" component={Routing} />\n              </Switch>\n            </Layout.Content>\n          </Layout>\n        </HashRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}