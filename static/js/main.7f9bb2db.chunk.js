(this.webpackJsonplotus=this.webpackJsonplotus||[]).push([[0],{151:function(t,e,n){},169:function(t,e,n){},187:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(26),c=n.n(s),i=n(27),o=n(28),u=n(31),p=n(30),j=(n(151),n(152),n(86)),l=n(23),d=(n(153),n(90));d.a.apps.length?d.a.app():d.a.initializeApp({apiKey:"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs",authDomain:"data-492da.firebaseapp.com",databaseURL:"https://data-492da.firebaseio.com",projectId:"data-492da",storageBucket:"data-492da.appspot.com",messagingSenderId:"381903672681",appId:"1:381903672681:web:813cffbc63da30d11f99f8",measurementId:"G-CD4W02BEZ7"});var h=d.a,b=h.auth();function m(t){b.onAuthStateChanged((function(e){return t(e)}))}var f=n(58),O=n(194),g=n(124),v=n(192),x=n(143),y=n(196),k=n(198),C=n(200),w=n(201),S=n.p+"static/media/lotus.3d5db4fb.png",I=n.p+"static/media/user.b326dd92.png",E=n(7),z=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).logout=function(){var t;t=function(t){return console.log(t)},b.signOut().then((function(e){return t(e)}))},a.login=function(){!function(t){var e=new h.auth.GoogleAuthProvider;b.signInWithPopup(e).then((function(e){return t(e)}))}((function(t){console.log(t)}))},a.state={avatar:I,user:null},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;m((function(e){null!=e?t.setState({avatar:e.photoURL,user:e}):t.setState({avatar:e,user:null})}))}},{key:"render",value:function(){var t=Object(E.jsx)(g.a,{children:null===this.state.user?Object(E.jsx)(g.a.Item,{icon:Object(E.jsx)(C.a,{}),onClick:this.login,children:"\u0110\u0103ng nh\u1eadp"},"menu-setting"):Object(E.jsx)(g.a.Item,{icon:Object(E.jsx)(w.a,{}),onClick:this.logout,children:"\u0110\u0103ng xu\u1ea5t"},"menu-logout")}),e=Object(E.jsx)(v.a,{overlay:t,placement:"topRight",children:Object(E.jsx)(x.a,{className:"dropdown-toggle mt-2",size:45,icon:Object(E.jsx)(y.a,{src:this.state.avatar,preview:!1}),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"})},"header-dropdown");return Object(E.jsx)(k.a,{className:"p-0",title:Object(E.jsx)(y.a,{width:45,height:45,src:S,preview:!1}),subTitle:Object(E.jsx)(j.b,{to:"/",children:"Home"}),extra:[e]})}}]),n}(a.Component),D=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return"Ant Design \xa92018 Created by Ant UED"}}]),n}(a.Component),R=n(199),L=n(118),M=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(R.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(E.jsx)(L.a,{type:"primary",children:"Back Home"})})}}]),n}(a.Component),N=n(83),U=n(50),A=n(195),B=n(114),G=n(82),P=n(144),T=n(197),F=n(193),_=n(204),H=(n(161),h.database());function Q(t,e){return H.ref(t).push(e).key}function W(t,e){H.ref(t).child(e).remove()}n(188);var J=h.storage();function X(t,e,n){J.ref(t).putString(e,"data_url").then((function(t){if(n){var e=t._delegate.metadata.fullPath;J.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function Z(t){J.ref(t).delete().catch((function(t){return console.log(t)}))}var K=n(134),V=n(202),Y=n(203),q=(n(169),function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).handleChange=function(t){t.saver.save().then((function(t){return a.setState({value:t})}))},a.reference=function(t){a.setState({editor:t})},a.submit=function(){a.props.submit&&(a.props.submit({comment:a.state.value,images:a.state.images}),a.state.editor.clear(),a.setState({images:[]}))},a.upload=function(t){if(a.state.images.length<9)for(var e=t.target.files,n=0;n<e.length;n++){var r=new FileReader;r.onload=a.load,r.readAsDataURL(e[n])}},a.load=function(t){if(a.state.images.length<9){var e=a.state.images;e.push({id:Date.now(),src:t.target.result}),e.forEach((function(t){1===e.length?t.size="100%":e.length>1&&e.length<=4?t.size="50%":e.length>4&&(t.size="33.33%")})),a.setState({images:e})}},a.state={value:{},editor:{},images:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.user;return Object(E.jsxs)(T.a,{actions:[Object(E.jsx)(V.a,{onClick:this.submit},"send"),Object(E.jsx)(Y.a,{onClick:function(){return document.getElementById("uploader".concat(t.props.id)).click()}},"img")],children:[Object(E.jsx)(F.a,{author:e.displayName,avatar:Object(E.jsx)(y.a,{src:e.photoURL,preview:!1})}),Object(E.jsx)("div",{className:"editor-container border",children:Object(E.jsx)(K.a,{onChange:this.handleChange,instanceRef:this.reference})}),Object(E.jsx)(y.a.PreviewGroup,{children:this.state.images.map((function(t){return Object(E.jsx)(y.a,{width:t.size,src:t.src})}))}),Object(E.jsx)("input",{type:"file",id:"uploader".concat(this.props.id),accept:"image/png, image/gif, image/jpeg",onChange:this.upload,hidden:!0})]})}}]),n}(a.Component)),$=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).submit=function(t){var e={userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment},n=Q("/posts/".concat(a.props.data.key,"/comments/"),e);t.images.forEach((function(t){var e="/image-comments/".concat(t.id,".png");X(e,t.src,(function(t){return Q("/posts/".concat(a.props.data.key,"/comments/").concat(n,"/images/"),{src:e,link:t})}))}))},a.delete=function(){a.props.data.images.forEach((function(t){return Z(t.src)})),W("/posts/",a.props.data.key),P.b.info("Xo\xe1 th\xe0nh c\xf4ng")},a.state={comments:[],comment:{time:1624457156027,blocks:[],version:"2.22.0"}},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"deleteComment",value:function(t){this.props.data.images.forEach((function(t){return Z(t.src)})),W("/posts/".concat(this.props.data.key,"/comments/"),t),P.b.info("Xo\xe1 th\xe0nh c\xf4ng")}},{key:"render",value:function(){var t=this,e=this.props.data,n=this.props.app.user.uid===e.uid;return Object(E.jsx)(N.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(U.a,{xl:16,lg:18,md:20,sm:22,xs:24,children:Object(E.jsxs)(T.a,{children:[Object(E.jsx)(N.a,{children:Object(E.jsxs)(U.a,{span:24,justify:"center",children:[Object(E.jsx)(F.a,{author:e.author,avatar:e.avatar,content:e.content,datetime:Object(E.jsx)(E.Fragment,{children:n&&Object(E.jsx)(_.a,{onClick:this.delete})})}),Object(E.jsx)(N.a,{justify:"center",children:Object(E.jsx)(U.a,{span:12,children:Object(E.jsx)(y.a.PreviewGroup,{children:e.images.map((function(t){return Object(E.jsx)(y.a,{width:t.size,src:t.link})}))})})})]})}),Object(E.jsx)(N.a,{children:Object(E.jsx)(U.a,{span:22,offset:1,children:e.comments.length>0&&Object(E.jsx)(A.b,{dataSource:e.comments,itemLayout:"horizontal",renderItem:function(e){var a=n||e.uid===t.props.app.user.uid;return Object(E.jsx)(A.b.Item,{children:Object(E.jsxs)(U.a,{span:24,justify:"center",children:[Object(E.jsx)(F.a,Object(G.a)(Object(G.a)({},e),{},{datetime:a&&Object(E.jsx)(_.a,{onClick:function(){return t.deleteComment(e.key)}})})),Object(E.jsx)(N.a,{justify:"center",children:Object(E.jsx)(U.a,{span:12,children:Object(E.jsx)(y.a.PreviewGroup,{children:e.images.map((function(t){return Object(E.jsx)(y.a,{width:t.size,src:t.link})}))})})})]})},Math.random())}})})}),Object(E.jsx)(N.a,{children:Object(E.jsx)(U.a,{span:22,offset:1,children:Object(E.jsx)(q,{id:e.key,user:this.props.app.user,submit:this.submit},e.key)})})]})})})}}]),n}(a.Component),tt=Object(f.b)((function(t){return{app:t.app}}))($),et=n(140),nt=n.n(et);function at(t){var e=[],n=function(n){var a=t[n],r=[],s=t[n].images;if(s)for(var c in s){var i=s[c];i.id=c,r.push(i)}r.forEach((function(t){1===r.length?t.size="100%":r.length>1&&r.length<=4?t.size="50%":r.length>4&&(t.size="33.33%")}));var o={key:n,uid:a.userId,author:a.author,avatar:a.avatar,content:Object(E.jsx)(nt.a,{data:a.content}),images:r};e.unshift(o)};for(var a in t)n(a);return e}var rt=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).loadMore=function(){a.setState({number:a.state.number+1}),a.load()},a.submit=function(t){var e=Q("/posts/",{userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment});t.images.forEach((function(t){var n="/image-posts/".concat(t.id,".png");X(n,t.src,(function(t){return Q("/posts/".concat(e,"/images/"),{src:n,link:t})}))}))},a.state={posts:[],number:5},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var t,e,n,a=this;t="/posts/",e=this.state.number,n=function(t){var e=at(t);e.forEach((function(e){return e.comments=at(t[e.key].comments)})),a.setState({posts:e})},H.ref(t).limitToLast(e).on("value",(function(t){return n(t.val())}))}},{key:"render",value:function(){return console.log(this.props),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(N.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(U.a,{xl:12,lg:14,md:16,sm:18,xs:20,children:Object(E.jsx)(q,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit},Math.random())})}),Object(E.jsx)(A.b,{dataSource:this.state.posts,loadMore:Object(E.jsx)(N.a,{align:"center",children:Object(E.jsx)(U.a,{children:Object(E.jsx)(B.a,{onClick:this.loadMore})})}),renderItem:function(t){return Object(E.jsx)(tt,{data:t},t.key)}})]})}}]),n}(a.Component),st=Object(f.b)((function(t){return{app:t.app}}))(rt),ct=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(i.a)(this,n),e.call(this,t)}return Object(o.a)(n,[{key:"render",value:function(){return console.log(this.props.app.user),null==this.props.app.user?Object(E.jsx)(l.a,{to:"/acessDenied"}):Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{exact:!0,path:"/",component:st}),Object(E.jsx)(l.b,{component:M})]})}}]),n}(a.Component),it=Object(f.b)((function(t){return{app:t.app}}))(ct),ot=n(84),ut=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(ot.a,{})}}]),n}(a.Component),pt=n(109),jt={user:{}},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return t.user=e.data,Object(G.a)(Object(G.a)({},t),{},{user:e.data});default:return t}},dt=Object(pt.a)({app:lt}),ht=Object(pt.b)(dt),bt=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),m((function(t){ht.dispatch({data:t,type:"SET_USER"})})),a}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(f.a,{store:ht,children:Object(E.jsx)(j.a,{children:Object(E.jsxs)(O.a,{className:"app",children:[Object(E.jsx)(O.a.Header,{style:{backgroundColor:"white"},children:Object(E.jsx)(z,{})}),Object(E.jsx)(O.a.Content,{className:"p-3",children:Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{path:"/acessDenied",component:ut}),Object(E.jsx)(l.b,{path:"/",component:it})]})}),Object(E.jsx)(O.a.Footer,{style:{textAlign:"center"},children:Object(E.jsx)(D,{})})]})})})}}]),n}(a.Component);c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(bt,{})}),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.7f9bb2db.chunk.js.map