{"version":3,"sources":["firebase/firebase.js","firebase/auth.js","reducers/app/app.action.js","img/lotus.png","img/user.png","components/layout/Header.js","firebase/database.js","firebase/storage.js","helper/mapper.js","components/view/posts/Post.js","components/tool/Editor.js","components/view/posts/Posts.js","components/view/posts/Detail.js","reducers/app/app.reducer.js","reducers/root.reducer.js","store.js","components/view/user/Setting.js","components/view/Protected.js","components/view/user/Login.js","components/view/user/Logout.js","components/layout/AccessDenied.js","components/layout/NotFound.js","App.js","index.js"],"names":["firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getCurrentUser","currentUser","updateDisplayName","data","action","user","updateProfile","displayName","then","updatePhotoUrl","photoURL","setUser","type","Header","username","avatar","userImg","this","props","menu","Item","icon","HomeOutlined","to","uid","SettingOutlined","LogoutOutlined","LoginOutlined","dropdown","overlay","placement","className","shape","size","src","preview","id","data-toggle","aria-haspopup","aria-expanded","title","width","height","lotus","subTitle","Text","strong","extra","Component","connect","store","database","getRowOneTimeAsync","ref","a","once","rs","val","getRow","on","getRowByParrentIdOneTime","name","orderByChild","equalTo","getRowByParrentId","addRow","push","result","key","deleteRow","child","remove","editRow","update","storage","uploadFile","path","file","put","fullPath","_delegate","metadata","getDownloadURL","uploadFileFromStringAsync","string","putString","url","mapOne","item","likes","lks","keyLike","userId","date","author","content","mapData","dataset","map","unshift","toBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","error","Post","vote","post","state","comments","loading","delete","bind","setState","parrentId","images","blocks","filter","includes","forEach","replace","split","load","message","info","isWriter","liked","actions","CaretUpOutlined","onClick","CommentOutlined","onConfirm","okText","cancelText","DeleteOutlined","justify","xl","lg","md","sm","xs","datetime","span","LoadingOutlined","Editor","editor","uploadByFile","submit","save","base64regex","block","i","test","Date","now","comment","clear","success","tools","warning","Warning","delimiter","Delimiter","paragraph","class","Paragraph","inlineToolbar","quote","Quote","marker","Marker","inlineCode","InlineCode","list","ListTool","image","ImageTool","config","uploader","uploadByUrl","SendOutlined","FileImageOutlined","onChange","handleChange","logLevel","onReady","Posts","loadMore","number","match","params","posts","limitToLast","getRowFromLastOneTime","keys","prevProps","toDateString","initValue","Math","random","dataSource","align","DownOutlined","renderItem","Detail","postId","offset","itemLayout","canDelete","deleteComment","initialState","template","combineReducers","createStore","Setting","finish","event","dispatch","upLoadFile","defaultActiveKey","centered","TabPane","tab","style","background","onFinish","wrapperCol","htmlType","fileList","beforeUpload","Routing","exact","component","Login","provider","GoogleAuthProvider","signInWithPopup","loginWithGoogle","history","Logout","signOut","AccessDenied","status","NotFound","App","onAuthStateChanged","backgroundColor","Content","Protected","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9e429695.chunk.js","sourcesContent":["import firebase from 'firebase/app';\n\nlet config = {\n    apiKey: \"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs\",\n    authDomain: \"data-492da.firebaseapp.com\",\n    databaseURL: \"https://data-492da.firebaseio.com\",\n    projectId: \"data-492da\",\n    storageBucket: \"data-492da.appspot.com\",\n    messagingSenderId: \"381903672681\",\n    appId: \"1:381903672681:web:813cffbc63da30d11f99f8\",\n    measurementId: \"G-CD4W02BEZ7\"\n};\n\nif (!firebase.apps.length) {\n    firebase.initializeApp(config);\n} else {\n    firebase.app();\n}\n\nexport default firebase;\n","import 'firebase/auth'\nimport firebase from './firebase';\n\nconst auth = firebase.auth();\n\nexport function onUserStateChange(action) {\n    auth.onAuthStateChanged((user) => action && action(user));\n}\n\nexport function getCurrentUser() {\n    return auth.currentUser;\n}\n\nexport function updateDisplayName(data, action) {\n    let user = firebase.auth().currentUser;\n    if (user) {\n        user.updateProfile({displayName: data}).then(() => action && action())\n    }\n}\n\nexport function updatePhotoUrl(data, action) {\n    let user = firebase.auth().currentUser;\n    if (user) {\n        user.updateProfile({photoURL: data}).then(() => action && action())\n    }\n}\n\nexport function loginWithGoogle(action) {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(rs => action && action(rs))\n}\n\nexport function signOut(action) {\n    auth.signOut().then(rs => action && action(rs))\n}\n\n","export const setUser = (data) => {\n    return {\n        data: data,\n        type: \"SET_USER\",\n    };\n};\n","export default __webpack_public_path__ + \"static/media/lotus.3d5db4fb.png\";","export default __webpack_public_path__ + \"static/media/user.b326dd92.png\";","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link} from 'react-router-dom';\nimport {Menu, PageHeader, Dropdown, Avatar, Image, Typography} from 'antd';\nimport {SettingOutlined, LogoutOutlined, LoginOutlined, HomeOutlined} from \"@ant-design/icons\";\nimport lotus from '../../img/lotus.png'\nimport userImg from '../../img/user.png'\n\nclass Header extends Component {\n  render() {\n    let avatar = userImg;\n    let username;\n    if (this.props.app.user) {\n      avatar = this.props.app.user.photoURL;\n      username = this.props.app.user.displayName\n    }\n\n    const menu = (\n      <Menu>\n        {this.props.app.user ?\n          <>\n            <Menu.Item icon={<HomeOutlined />} key=\"menu-setting\">\n              <Link to={`/user/${this.props.app.user.uid}`}>Trang cá nhân</Link>\n            </Menu.Item>\n            <Menu.Item icon={<SettingOutlined />} key=\"menu-setting\">\n              <Link to='/setting'>Cài Đặt</Link>\n            </Menu.Item>\n            <Menu.Item icon={<LogoutOutlined />} key=\"menu-logout\">\n              <Link to='/logout'>Đăng xuất</Link>\n            </Menu.Item>\n          </>\n          :\n          <Menu.Item icon={<LoginOutlined />} key=\"menu-setting\">\n            <Link to='/login'>Đăng nhập</Link>\n          </Menu.Item>\n        }\n      </Menu>\n    );\n    const dropdown = (\n      <Dropdown overlay={menu} placement=\"topRight\" key=\"header-dropdown\">\n        <Avatar\n          className=\"dropdown-toggle mt-2\"\n          shape=\"square\"\n          size={45}\n          icon={<Image src={avatar} preview={false} />}\n          id=\"dropdownMenuButton\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        />\n      </Dropdown>\n    );\n    return (\n      <PageHeader className=\"p-0 m-0\" title={<Image width={45} height={45} src={lotus} preview={false} />}\n        subTitle={<Typography.Text key='home' strong><Link className='text-volcano' to='/'>Home</Link></Typography.Text>}\n        extra={[<Typography.Text key='username' strong>{username}</Typography.Text>,\n          dropdown]} />\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Header);\n\n","import 'firebase/database';\nimport firebase from './firebase'\n\nconst database = firebase.database();\nexport async function getRowOneTimeAsync(ref) {\n    let rs = await database.ref(ref).once('value');\n    return rs.val();\n}\nexport function getRowOneTime(ref, action) {\n    database.ref(ref).once('value').then(rs => action(rs.val()))\n}\nexport function getRow(ref, action) {\n    database.ref(ref).on('value', rs => action(rs.val()))\n}\nexport function getRowFromLastOneTime(ref, number, action) {\n    database.ref(ref).limitToLast(number).once('value').then(rs => action(rs.val()))\n}\nexport function getRowFromFirst(ref, number, action) {\n    database.ref(ref).limitToFirst(number).on('value', rs => action(rs.val()))\n}\nexport function getRowFromLast(ref, number, action) {\n    database.ref(ref).limitToLast(number).on('value', rs => action(rs.val()))\n}\nexport function getRowByParrentIdFromLastOneTime(ref, number, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).limitToLast(number).once('value').then(rs => action && action(rs.val()))\n}\nexport function getRowByParrentIdOneTime(ref, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).once('value').then(rs => action && action(rs.val()))\n}\nexport function getRowByParrentId(ref, name, id, action) {\n    database.ref(ref).orderByChild(name).equalTo(id).on('value', rs => action && action(rs.val()))\n}\nexport function addRow(ref, data, action) {\n    let rs = database.ref(ref).push(data)\n    rs.then(result => action && action(result))\n    return rs.key;\n}\nexport function deleteRow(ref, id, action) {\n    database.ref(ref).child(id).remove().then(rs => action && action(rs))\n}\nexport function editRow(ref, id, data, action) {\n    database.ref(ref).child(id).update(data).then(rs => action && action(rs))\n}\n","import 'firebase/storage';\nimport firebase from './firebase'\n\nconst storage = firebase.storage();\n\nexport async function uploadFileAsync(path, file) {\n    let ref = storage.ref(path);\n    let rs = await ref.put(file)\n    let fullPath = rs._delegate.metadata.fullPath;\n    let url = await storage.ref(fullPath).getDownloadURL()\n    return {fullPath, url};\n}\nexport function uploadFile(path, file, action) {\n    let ref = storage.ref(path);\n    ref.put(file).then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    });\n}\nexport async function uploadFileFromStringAsync(path, string) {\n    let ref = storage.ref(path);\n    let rs = await ref.putString(string, 'data_url')\n    let fullPath = rs._delegate.metadata.fullPath;\n    let url = await storage.ref(fullPath).getDownloadURL()\n    return {fullPath, url};\n}\nexport function uploadFileFromString(path, string, action) {\n    let ref = storage.ref(path);\n    ref.putString(string, 'data_url').then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    })\n}\nexport function deleteFile(path) {\n    storage.ref(path).delete().catch(error => console.log(error));\n}\nexport function deleteByUrl(urls) {\n    urls.forEach(url => {\n        url = url.replace('https://firebasestorage.googleapis.com/v0/b/data-492da.appspot.com/o/images%2F', '')\n        url = url.split('?')\n        storage.ref(`/images/${url[0]}`).delete()\n    })\n}\n","import Output from 'editorjs-react-renderer';\nimport {Link} from 'react-router-dom'\nimport {Image, Avatar} from 'antd'\n\nexport function mapOne(item, key) {\n\tlet likes = []\n\tlet lks = item.likes;\n\tif (lks) {\n\t\tfor (let keyLike in lks) {\n\t\t\tlikes.push(lks[keyLike].uid);\n\t\t}\n\t}\n\treturn {\n\t\tkey: key,\n\t\tuid: item.userId,\n\t\tdate: item.date,\n\t\tauthor: item.author,\n\t\tavatar: <Link to={`/user/${item.userId}`}><Avatar icon={<Image src={item.avatar} preview={false} />} /></Link>,\n\t\tcontent: <Output data={item.content} />,\n\t\tlikes: likes\n\t}\n}\nexport function mapData(data) {\n\tlet dataset = []\n\tfor (let key in data) {\n\t\tif (data[key]) {\n\t\t\tlet map = mapOne(data[key], key);\n\t\t\tdataset.unshift(map);\n\t\t}\n\t}\n\treturn dataset;\n}\n\nexport function toBase64(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(file);\n\t\treader.onload = () => resolve(reader.result);\n\t\treader.onerror = error => reject(error);\n\t})\n};\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Link} from 'react-router-dom';\nimport {Comment, Row, Col, Card, Popconfirm, message} from 'antd';\nimport {DeleteOutlined, CommentOutlined, CaretUpOutlined, LoadingOutlined} from \"@ant-design/icons\";\nimport {getRowOneTimeAsync, getRowByParrentIdOneTime, getRow, deleteRow, addRow} from '../../../firebase/database'\nimport {deleteByUrl} from '../../../firebase/storage';\nimport {mapOne} from '../../../helper/mapper'\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {comments: [], post: null, loading: true}\n    this.delete = this.delete.bind(this)\n  }\n  componentDidMount() {\n    getRow(`/posts/${this.props.data}`, rs => {\n      if (rs) {\n        this.setState({post: mapOne(rs, this.props.data), loading: false});\n      }\n    })\n  }\n  async delete() {\n    let parrentId = this.props.data\n    let rs = await getRowOneTimeAsync(`/posts/${parrentId}`)\n    let images = rs.content.blocks.filter(item => item.type === 'image').map(item => item.data.file.url).filter(item => item.includes('firebasestorage.googleapis.com'));\n    deleteByUrl(images);\n    deleteRow('/posts/', parrentId, () => {\n      getRowByParrentIdOneTime('/comments/', 'postId', parrentId, rs => {\n        for (let key in rs) {\n          deleteRow('/comments/', key)\n        }\n      })\n      this.props.load()\n      message.info('Xoá thành công');\n    });\n  }\n  vote = (post) => {\n    getRowByParrentIdOneTime(`/posts/${post.key}/likes`, 'uid', this.props.app.user.uid, rs => {\n      if (rs) {\n        for (let key in rs) {\n          deleteRow(`/posts/${post.key}/likes`, key, null)\n        }\n      } else {\n        addRow(`/posts/${post.key}/likes`, {uid: this.props.app.user.uid}, null);\n      }\n    })\n  }\n  render() {\n    let post = this.state.post\n    if (this.state.post) {\n      let uid = this.props.app.user.uid\n      let isWriter = uid === post.uid\n      let liked = post.likes.includes(uid)\n      let actions = [\n        <div className='flex-center' key='like'><CaretUpOutlined className={`action-icon mr-1 ${liked && \"text-volcano\"}`}\n          onClick={() => this.vote(post)} />{<p className='number-like-action'>{post.likes.length}</p>}</div>,\n        <Link to={`/detail/${post.key}`} key='comments'><CommentOutlined className='action-icon text-mute' /></Link>,\n      ]\n      isWriter && actions.push(\n        <Popconfirm title=\"Bạn có muốn xoá bài viết này không?\" onConfirm={this.delete} okText=\"Có\" cancelText=\"Không\" key='delete'>\n          <DeleteOutlined className='action-icon' />\n        </Popconfirm>)\n      return (\n        <Row justify=\"center\" className='mb-4'>\n          <Col xl={10} lg={14} md={18} sm={22} xs={24}>\n            <Card actions={actions} title={\n              <Comment author={<p className='author-name'>{post.author}</p>} avatar={post.avatar} datetime={post.date} />\n            }>\n              <Row>\n                <Col span={24} justify=\"center\">\n                  {post.content}\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      );\n    } else {\n      return <LoadingOutlined />;\n    }\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Post);\n\n","import React, {Component} from \"react\";\nimport EditorJs from 'react-editor-js';\nimport Paragraph from '@editorjs/paragraph';\nimport ImageTool from '@editorjs/image';\nimport Quote from '@editorjs/quote';\nimport Marker from '@editorjs/marker';\nimport InlineCode from '@editorjs/inline-code';\nimport ListTool from '@editorjs/list';\nimport Delimiter from '@editorjs/delimiter'\nimport Warning from '@editorjs/warning'\nimport {Comment, Card, Image} from 'antd';\nimport {uploadFileFromStringAsync} from '../../firebase/storage';\nimport {FileImageOutlined, SendOutlined} from \"@ant-design/icons\";\nimport {toBase64} from '../../helper/mapper';\n\nexport default class Editor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {editor: null}\n\t\tthis.uploadByFile = this.uploadByFile.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n\t}\n\tasync submit() {\n\t\tif (this.props.submit) {\n\t\t\tconst content = await this.state.editor.save()\n\t\t\tconst base64regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n\t\t\tconst blocks = content.blocks.filter(block => block.type === 'image')\n\t\t\tfor (let i = 0; i < blocks.length; i++) {\n\t\t\t\tconst block = blocks[i];\n\t\t\t\tif (base64regex.test(block.data.file.url.replace(/^data:image\\/[a-z]+;base64,/, \"\"))) {\n\t\t\t\t\tconst rs = await uploadFileFromStringAsync(`/images/${Date.now()}`, block.data.file.url);\n\t\t\t\t\tblock.data.file.url = rs.url\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.props.submit({comment: content})\n\t\t\tthis.state.editor.clear();\n\t\t}\n\t}\n\tasync uploadByFile(file) {\n\t\tlet data = await toBase64(file);\n\t\treturn {\n\t\t\tsuccess: 1,\n\t\t\tfile: {\n\t\t\t\turl: data\n\t\t\t}\n\t\t}\n\t}\n\tasync uploadByUrl(url) {\n\t\treturn {\n\t\t\tsuccess: 1,\n\t\t\tfile: {\n\t\t\t\turl: url\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\tconst user = this.props.user;\n\t\tconst tools = {\n\t\t\twarning: Warning,\n\t\t\tdelimiter: Delimiter,\n\t\t\tparagraph: {class: Paragraph, inlineToolbar: true},\n\t\t\tquote: Quote,\n\t\t\tmarker: Marker,\n\t\t\tinlineCode: InlineCode,\n\t\t\tlist: ListTool,\n\t\t\timage: {\n\t\t\t\tclass: ImageTool,\n\t\t\t\tconfig: {uploader: {uploadByFile: this.uploadByFile, uploadByUrl: this.uploadByUrl}}\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tactions={[\n\t\t\t\t\t<SendOutlined key='send' onClick={this.submit} className='action-icon' />,\n\t\t\t\t\t<FileImageOutlined key='img' className='action-icon' />,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Comment author={<p className='author-name'>{user.displayName}</p>} avatar={<Image src={user.photoURL} preview={false} />} />\n\t\t\t\t<div className='editor-container border mb-2'>\n\t\t\t\t\t<EditorJs onChange={this.handleChange} tools={tools} logLevel='WARN' onReady={editor => this.setState({editor: editor})} />\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Row, Col, List} from \"antd\";\nimport {DownOutlined} from \"@ant-design/icons\";\nimport Post from \"./Post\";\nimport Editor from \"../../tool/Editor\";\nimport {addRow, getRowFromLastOneTime, getRowByParrentIdFromLastOneTime} from \"../../../firebase/database\";\n\nclass Posts extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {posts: [], number: 5};\n    this.submit = this.submit.bind(this);\n  }\n  componentDidMount() {\n    this.load();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.uid !== this.props.match.params.uid) {\n      this.load();\n    }\n  }\n  loadMore = () => {\n    this.setState({number: this.state.number + 5});\n    this.load();\n  };\n  load = () => {\n    if (this.props.match.params.uid) {\n      getRowByParrentIdFromLastOneTime(\"/posts/\", this.state.number, 'userId', this.props.match.params.uid, (rs) => {\n        this.setState({posts: this.posts(rs)})\n      });\n    } else {\n      getRowFromLastOneTime(\"/posts/\", this.state.number, (rs) => {\n        this.setState({posts: this.posts(rs)})\n      });\n    }\n  }\n  posts = (data) => {\n    let keys = []\n    for (let key in data) {\n      keys.unshift(key)\n    }\n    return keys;\n  }\n  async submit(data) {\n    let post = {\n      userId: this.props.app.user.uid,\n      author: this.props.app.user.displayName,\n      avatar: this.props.app.user.photoURL,\n      content: data.comment,\n      date: new Date().toDateString()\n    };\n    addRow(\"/posts/\", post);\n    this.load()\n  };\n  render() {\n    return (\n      <>\n        <Row justify=\"center\" className=\"mb-4\">\n          <Col xl={10} lg={14} md={18} sm={22} xs={24}>\n            <Editor key={Math.random()} user={this.props.app.user} initValue={this.state.comment} submit={this.submit} />\n          </Col>\n        </Row>\n        <List\n          dataSource={this.state.posts}\n          loadMore={<Row align=\"center\"><Col><DownOutlined onClick={this.loadMore} /></Col></Row>}\n          renderItem={(item) => <Post key={item} data={item} load={this.load} />}\n        />\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Posts);\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Comment, Row, Col, Card, Popconfirm, message, List} from 'antd';\nimport {DeleteOutlined} from \"@ant-design/icons\";\nimport {getRow, addRow, deleteRow, getRowByParrentId} from '../../../firebase/database'\nimport {mapOne, mapData} from '../../../helper/mapper'\nimport Editor from '../../tool/Editor'\n\nclass Detail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {post: {}, comments: [], loading: true}\n  }\n  componentDidMount() {\n    let id = this.props.match.params.id\n    getRow(`/posts/${id}`, rs => {\n      if (rs) {\n        this.setState({loading: false, post: mapOne(rs, id)})\n      }\n    })\n    getRowByParrentId('/comments/', 'postId', id, rs => {\n      this.setState({comments: mapData(rs)})\n    })\n  }\n  submit = (data) => {\n    let comment = {\n      postId: this.props.match.params.id,\n      userId: this.props.app.user.uid,\n      author: this.props.app.user.displayName,\n      avatar: this.props.app.user.photoURL,\n      content: data.comment,\n      date: new Date().toDateString()\n    }\n    addRow('/comments/', comment)\n  }\n  delete = () => {\n    deleteRow('/posts/', this.props.data.key);\n  }\n  deleteComment(id) {\n    deleteRow(`/comments/`, id);\n    message.info('Xoá thành công');\n  }\n  render() {\n    let post = this.state.post\n    let isWriter = this.props.app.user.uid === post.uid\n    if (this.state.loading) {return ''}\n    return (\n      <Row justify=\"center\" className='mb-4'>\n        <Col xl={16} lg={18} md={20} sm={22} xs={24}>\n          <Card title={<Comment author={post.author} avatar={post.avatar} datetime={post.date} />}>\n            <Row>\n              <Col span={24} justify=\"center\">\n                {post.content}\n              </Col>\n            </Row>\n            <Row>\n              <Col span={22} offset={1}>\n                <Editor key={post.key} id={post.key} user={this.props.app.user} submit={this.submit} />\n              </Col>\n            </Row>\n            <Row>\n              {\n                <Col span={22} offset={1}>\n                  {\n                    this.state.comments.length > 0 &&\n                    <List\n                      dataSource={this.state.comments}\n                      itemLayout=\"horizontal\"\n                      renderItem={props => {\n                        let canDelete = isWriter || props.uid === this.props.app.user.uid\n                        return <List.Item key={Math.random()}>\n                          <Col span={24} justify=\"center\">\n                            <Comment author={props.author} avatar={props.avatar} content={props.content}\n                              datetime={canDelete &&\n                                <Popconfirm title=\"Bạn có muốn xoá bài viết này không?\" onConfirm={() => this.deleteComment(props.key)} okText=\"Có\" cancelText=\"Không\" >\n                                  <DeleteOutlined />\n                                </Popconfirm>\n                              } />\n                          </Col>\n                        </List.Item>\n                      }\n                      }\n                    />\n                  }\n                </Col>\n              }\n            </Row>\n          </Card>\n        </Col>\n      </Row>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Detail);\n","const initialState = {\n  user: {}\n};\n\nconst template = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_USER\":\n      state.user = action.data;\n      return {...state, user: action.data};\n    default:\n      return state;\n  }\n};\n\nexport default template;\n","import {combineReducers} from 'redux';\nimport app from './app/app.reducer';\nexport default combineReducers({app});\n","import {createStore} from 'redux';\nimport combineReducers from './reducers/root.reducer';\n\nexport default createStore(combineReducers);\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport store from '../../../store';\nimport {setUser} from '../../../reducers/app/app.action'\nimport {Tabs, Avatar, Card, Image, Col, Row, Form, Input, Button, Upload, message} from 'antd'\nimport {getRowByParrentId, editRow} from '../../../firebase/database';\nimport {updateDisplayName, updatePhotoUrl, getCurrentUser} from '../../../firebase/auth'\nimport {uploadFile} from '../../../firebase/storage'\nclass Setting extends Component {\n  finish = (event) => {\n    getRowByParrentId('/posts/', 'userId', this.props.app.user.uid, rs => {\n      for (let key in rs) {\n        let post = rs[key];\n        post.author = event.username;\n        editRow('/posts/', key, post, null);\n      }\n    })\n    updateDisplayName(event.username, () => {\n      store.dispatch(setUser(getCurrentUser()))\n      message.success('Cập nhật thành công');\n    })\n  }\n  upLoadFile = (file) => {\n    uploadFile(`/avatar/${this.props.app.user.uid}.png`, file, (rs) => {\n      getRowByParrentId('/posts/', 'userId', this.props.app.user.uid, result => {\n        for (let key in result) {\n          let post = result[key];\n          post.avatar = rs;\n          editRow('/posts/', key, post, null);\n        }\n      })\n      updatePhotoUrl(rs, () => {\n        store.dispatch(setUser(getCurrentUser()))\n        message.success('Cập nhật thành công');\n      })\n    })\n  }\n  render() {\n    return (\n      <Row justify='center'>\n        <Col>\n          <Tabs defaultActiveKey=\"1\" centered>\n            <Tabs.TabPane tab=\"Đổi tên người dùng\" key=\"1\">\n              <Card style={{width: 300, background: 'none'}}>\n                <Form size='middle' onFinish={this.finish}>\n                  <Form.Item name=\"username\">\n                    <Input />\n                  </Form.Item>\n\n                  <Form.Item wrapperCol={{offset: 3, span: 16}}>\n                    <Button type=\"primary\" htmlType=\"submit\"> Cập nhật tên người dùng </Button>\n                  </Form.Item>\n                </Form>\n              </Card>\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Đổi ảnh đại diện\" key=\"2\">\n              <Card style={{width: 300, background: 'none'}}>\n                <Row justify='center'>\n                  <Col>\n                    <Avatar size={250} icon={<Image src={this.props.app.user.photoURL} preview={false} />} />\n                    <Row className='pt-3' justify='center'>\n                      <Col>\n                        <Upload fileList={[]} beforeUpload={(file) => {this.upLoadFile(file); return false;}}>\n                          <Button type='primary'>Cập nhật ảnh đại diện</Button>\n                        </Upload>\n                      </Col>\n                    </Row>\n                  </Col>\n                </Row >\n              </Card>\n            </Tabs.TabPane>\n          </Tabs>\n        </Col>\n      </Row >\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    app: store.app,\n  };\n};\nexport default connect(mapStateToProps)(Setting);\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Redirect, Route, Switch} from \"react-router-dom\";\nimport Posts from './posts/Posts'\nimport Detail from './posts/Detail'\nimport Setting from './user/Setting'\n\nclass Routing extends Component {\n\trender() {\n\t\treturn this.props.app.user == null ? <Redirect to=\"/acessDenied\" /> : <Switch>\n\t\t\t<Route exact path='/' component={Posts} />\n\t\t\t<Route exact path='/user/:uid' component={Posts} />\n\t\t\t<Route exact path='/detail/:id' component={Detail} />\n\t\t\t<Route exact path='/setting' component={Setting} />\n\t\t</Switch>\n\t}\n}\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(Routing);\n","import {Component} from \"react\";\nimport {loginWithGoogle} from '../../../firebase/auth';\n\nexport default class Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tloginWithGoogle(() => this.props.history.push('/'));\n\t}\n\trender() {\n\t\treturn '';\n\t}\n}\n","import {Component} from \"react\";\nimport {signOut} from '../../../firebase/auth';\n\nexport default class Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tsignOut(() => this.props.history.push('/acessDenied'));\n\t}\n\trender() {\n\t\treturn '';\n\t}\n}\n","import React, {Component} from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {Result} from 'antd';\n\nclass AccessDenied extends Component {\n\trender() {\n\t\treturn this.props.app.user == null ? <Result status=\"403\" title=\"403\" subTitle=\"Bạn chưa đăng nhập!\" /> : <Redirect to='/' />;\n\t}\n}\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(AccessDenied);\n","import React, {Component} from \"react\";\nimport {Link} from 'react-router-dom'\nimport {Result, Button} from 'antd'\n\nexport default class NotFound extends Component {\n   render() {\n      return <Result\n         status=\"404\"\n         title=\"404\"\n         subTitle=\"Không tìm thấy trang yêu cầu!\"\n         extra={<Button type='primary'><Link to=\"/\">Về trang chủ</Link></Button>}\n      />\n   }\n}\n","import './css/app.scss';\nimport 'antd/dist/antd.css';\nimport React, {Component} from \"react\";\nimport {HashRouter, Route, Switch} from \"react-router-dom\";\nimport {onUserStateChange} from './firebase/auth'\nimport {setUser} from './reducers/app/app.action'\nimport {Provider} from \"react-redux\";\nimport {Layout} from 'antd';\nimport Header from './components/layout/Header';\nimport Protected from './components/view/Protected'\nimport Login from './components/view/user/Login'\nimport Logout from './components/view/user/Logout'\nimport AccessDenied from './components/layout/AccessDenied'\nimport NotFound from './components/layout/NotFound';\nimport store from './store';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tonUserStateChange(user => {\n\t\t\tstore.dispatch(setUser(user))\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Provider store={store}>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Layout className=\"app\">\n\t\t\t\t\t\t<Layout.Header className=\"px-3\" style={{backgroundColor: \"white\"}}>\n\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t</Layout.Header>\n\t\t\t\t\t\t<Layout.Content className=\"p-3\">\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route exact path='/login' component={Login} />\n\t\t\t\t\t\t\t\t<Route exact path='/logout' component={Logout} />\n\t\t\t\t\t\t\t\t<Route exact path='/acessDenied' component={AccessDenied} />\n\t\t\t\t\t\t\t\t<Route path=\"/\" component={Protected} />\n\t\t\t\t\t\t\t\t<Route component={NotFound} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</Layout.Content>\n\t\t\t\t\t</Layout>\n\t\t\t\t</HashRouter>\n\t\t\t</Provider>);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}