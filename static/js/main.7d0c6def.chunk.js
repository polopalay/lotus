(this.webpackJsonplotus=this.webpackJsonplotus||[]).push([[0],{156:function(t,e,n){},175:function(t,e,n){},193:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(30),s=n.n(c),i=n(26),o=n(27),u=n(29),j=n(28),p=(n(156),n(157),n(51)),l=n(31),d=(n(158),n(93));d.a.apps.length?d.a.app():d.a.initializeApp({apiKey:"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs",authDomain:"data-492da.firebaseapp.com",databaseURL:"https://data-492da.firebaseio.com",projectId:"data-492da",storageBucket:"data-492da.appspot.com",messagingSenderId:"381903672681",appId:"1:381903672681:web:813cffbc63da30d11f99f8",measurementId:"G-CD4W02BEZ7"});var h=d.a,b=h.auth();function m(t){b.onAuthStateChanged((function(e){return t&&t(e)}))}var f=n(52),O=n(200),x=n(127),g=n(198),v=n(147),y=n(202),k=n(205),C=n(204),w=n(207),S=n(208),I=n.p+"static/media/lotus.3d5db4fb.png",E=n.p+"static/media/user.b326dd92.png",D=n(7),z=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={avatar:E,user:null},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;m((function(e){null!=e?t.setState({avatar:e.photoURL,user:e}):t.setState({avatar:E,user:null})}))}},{key:"render",value:function(){var t=Object(D.jsx)(x.a,{children:null===this.state.user?Object(D.jsx)(x.a.Item,{icon:Object(D.jsx)(w.a,{}),children:Object(D.jsx)(p.b,{to:"/login",children:"\u0110\u0103ng nh\u1eadp"})},"menu-setting"):Object(D.jsx)(x.a.Item,{icon:Object(D.jsx)(S.a,{}),children:Object(D.jsx)(p.b,{to:"/logout",children:"\u0110\u0103ng xu\u1ea5t"})},"menu-logout")}),e=Object(D.jsx)(g.a,{overlay:t,placement:"topRight",children:Object(D.jsx)(v.a,{className:"dropdown-toggle mt-2",size:45,icon:Object(D.jsx)(y.a,{src:this.state.avatar,preview:!1}),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"})},"header-dropdown");return Object(D.jsx)(k.a,{className:"p-0",title:Object(D.jsx)(y.a,{width:45,height:45,src:I,preview:!1}),subTitle:Object(D.jsx)(C.a.Text,{strong:!0,children:Object(D.jsx)(p.b,{style:{color:"#000000"},to:"/",children:"Home"})}),extra:[e]})}}]),n}(a.Component),R=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return"Ant Design \xa92018 Created by Ant UED"}}]),n}(a.Component),L=n(206),M=n(121),N=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(D.jsx)(L.a,{status:"404",title:"404",subTitle:"Kh\xf4ng t\xecm th\u1ea5y trang y\xeau c\u1ea7u!",extra:Object(D.jsx)(M.a,{type:"primary",children:Object(D.jsx)(p.b,{to:"/",children:"V\u1ec1 trang ch\u1ee7"})})})}}]),n}(a.Component),U=n(86),A=n(50),B=n(201),T=n(116),G=n(85),P=n(148),F=n(203),_=n(199),Q=n(211),W=(n(167),h.database());function H(t,e){return W.ref(t).push(e).key}function J(t,e){W.ref(t).child(e).remove()}n(194);var K=h.storage();function V(t,e,n){K.ref(t).putString(e,"data_url").then((function(t){if(n){var e=t._delegate.metadata.fullPath;K.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function X(t){K.ref(t).delete().catch((function(t){return console.log(t)}))}var Z=n(139),Y=n(209),q=n(210),$=(n(175),function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).handleChange=function(t){t.saver.save().then((function(t){return a.setState({value:t})}))},a.reference=function(t){a.setState({editor:t})},a.submit=function(){a.props.submit&&(a.props.submit({comment:a.state.value,images:a.state.images}),a.state.editor.clear(),a.setState({images:[]}))},a.upload=function(t){if(a.state.images.length<9)for(var e=t.target.files,n=0;n<e.length;n++){var r=new FileReader;r.onload=a.load,r.readAsDataURL(e[n])}},a.load=function(t){if(a.state.images.length<9){var e=a.state.images;e.push({id:Date.now(),src:t.target.result}),e.forEach((function(t){1===e.length?t.size="100%":e.length>1&&e.length<=4?t.size="50%":e.length>4&&(t.size="33.33%")})),a.setState({images:e})}},a.state={value:{},editor:{},images:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.user;return Object(D.jsxs)(F.a,{actions:[Object(D.jsx)(Y.a,{onClick:this.submit},"send"),Object(D.jsx)(q.a,{onClick:function(){return document.getElementById("uploader".concat(t.props.id)).click()}},"img")],children:[Object(D.jsx)(_.a,{author:e.displayName,avatar:Object(D.jsx)(y.a,{src:e.photoURL,preview:!1})}),Object(D.jsx)("div",{className:"editor-container border",children:Object(D.jsx)(Z.a,{onChange:this.handleChange,instanceRef:this.reference})}),Object(D.jsx)(y.a.PreviewGroup,{children:this.state.images.map((function(t){return Object(D.jsx)(y.a,{width:t.size,src:t.src})}))}),Object(D.jsx)("input",{type:"file",id:"uploader".concat(this.props.id),accept:"image/png, image/gif, image/jpeg",onChange:this.upload,hidden:!0})]})}}]),n}(a.Component)),tt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).submit=function(t){var e={userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment},n=H("/posts/".concat(a.props.data.key,"/comments/"),e);t.images.forEach((function(t){var e="/image-comments/".concat(t.id,".png");V(e,t.src,(function(t){return H("/posts/".concat(a.props.data.key,"/comments/").concat(n,"/images/"),{src:e,link:t})}))}))},a.delete=function(){a.props.data.images.forEach((function(t){return X(t.src)})),J("/posts/",a.props.data.key),P.b.info("Xo\xe1 th\xe0nh c\xf4ng")},a.state={comments:[],comment:{time:1624457156027,blocks:[],version:"2.22.0"}},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"deleteComment",value:function(t){this.props.data.images.forEach((function(t){return X(t.src)})),J("/posts/".concat(this.props.data.key,"/comments/"),t),P.b.info("Xo\xe1 th\xe0nh c\xf4ng")}},{key:"render",value:function(){var t=this,e=this.props.data,n=this.props.app.user.uid===e.uid;return Object(D.jsx)(U.a,{justify:"center",className:"mb-4",children:Object(D.jsx)(A.a,{xl:16,lg:18,md:20,sm:22,xs:24,children:Object(D.jsxs)(F.a,{children:[Object(D.jsx)(U.a,{children:Object(D.jsxs)(A.a,{span:24,justify:"center",children:[Object(D.jsx)(_.a,{author:e.author,avatar:e.avatar,content:e.content,datetime:Object(D.jsx)(D.Fragment,{children:n&&Object(D.jsx)(Q.a,{onClick:this.delete})})}),Object(D.jsx)(U.a,{justify:"center",children:Object(D.jsx)(A.a,{span:12,children:Object(D.jsx)(y.a.PreviewGroup,{children:e.images.map((function(t){return Object(D.jsx)(y.a,{width:t.size,src:t.link})}))})})})]})}),Object(D.jsx)(U.a,{children:Object(D.jsx)(A.a,{span:22,offset:1,children:e.comments.length>0&&Object(D.jsx)(B.b,{dataSource:e.comments,itemLayout:"horizontal",renderItem:function(e){var a=n||e.uid===t.props.app.user.uid;return Object(D.jsx)(B.b.Item,{children:Object(D.jsxs)(A.a,{span:24,justify:"center",children:[Object(D.jsx)(_.a,Object(G.a)(Object(G.a)({},e),{},{datetime:a&&Object(D.jsx)(Q.a,{onClick:function(){return t.deleteComment(e.key)}})})),Object(D.jsx)(U.a,{justify:"center",children:Object(D.jsx)(A.a,{span:12,children:Object(D.jsx)(y.a.PreviewGroup,{children:e.images.map((function(t){return Object(D.jsx)(y.a,{width:t.size,src:t.link})}))})})})]})},Math.random())}})})}),Object(D.jsx)(U.a,{children:Object(D.jsx)(A.a,{span:22,offset:1,children:Object(D.jsx)($,{id:e.key,user:this.props.app.user,submit:this.submit},e.key)})})]})})})}}]),n}(a.Component),et=Object(f.b)((function(t){return{app:t.app}}))(tt),nt=n(144),at=n.n(nt);function rt(t){var e=[],n=function(n){var a=t[n],r=[],c=t[n].images;if(c)for(var s in c){var i=c[s];i.id=s,r.push(i)}r.forEach((function(t){1===r.length?t.size="100%":r.length>1&&r.length<=4?t.size="50%":r.length>4&&(t.size="33.33%")}));var o={key:n,uid:a.userId,author:a.author,avatar:a.avatar,content:Object(D.jsx)(at.a,{data:a.content}),images:r};e.unshift(o)};for(var a in t)n(a);return e}var ct=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).loadMore=function(){a.setState({number:a.state.number+1}),a.load()},a.submit=function(t){var e=H("/posts/",{userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment});t.images.forEach((function(t){var n="/image-posts/".concat(t.id,".png");V(n,t.src,(function(t){return H("/posts/".concat(e,"/images/"),{src:n,link:t})}))}))},a.state={posts:[],number:5},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var t,e,n,a=this;t="/posts/",e=this.state.number,n=function(t){var e=rt(t);e.forEach((function(e){return e.comments=rt(t[e.key].comments)})),a.setState({posts:e})},W.ref(t).limitToLast(e).on("value",(function(t){return n(t.val())}))}},{key:"render",value:function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(U.a,{justify:"center",className:"mb-4",children:Object(D.jsx)(A.a,{xl:12,lg:14,md:16,sm:18,xs:20,children:Object(D.jsx)($,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit},Math.random())})}),Object(D.jsx)(B.b,{dataSource:this.state.posts,loadMore:Object(D.jsx)(U.a,{align:"center",children:Object(D.jsx)(A.a,{children:Object(D.jsx)(T.a,{onClick:this.loadMore})})}),renderItem:function(t){return Object(D.jsx)(et,{data:t},t.key)}})]})}}]),n}(a.Component),st=Object(f.b)((function(t){return{app:t.app}}))(ct),it=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(D.jsx)(l.a,{to:"/acessDenied"}):Object(D.jsxs)(l.d,{children:[Object(D.jsx)(l.b,{exact:!0,path:"/",component:st}),Object(D.jsx)(l.b,{component:N})]})}}]),n}(a.Component),ot=Object(f.b)((function(t){return{app:t.app}}))(it),ut=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),function(t){var e=new h.auth.GoogleAuthProvider;b.signInWithPopup(e).then((function(e){return t&&t(e)}))}((function(){return a.props.history.push("/")})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),jt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a,r;return Object(i.a)(this,n),a=e.call(this,t),r=function(){return a.props.history.push("/acessDenied")},b.signOut().then((function(t){return r&&r(t)})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),pt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(D.jsx)(L.a,{status:"403",title:"403",subTitle:"B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp!"}):Object(D.jsx)(l.a,{to:"/"})}}]),n}(a.Component),lt=Object(f.b)((function(t){return{app:t.app}}))(pt),dt=n(112),ht={user:{}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return t.user=e.data,Object(G.a)(Object(G.a)({},t),{},{user:e.data});default:return t}},mt=Object(dt.a)({app:bt}),ft=Object(dt.b)(mt),Ot=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),m((function(t){ft.dispatch({data:t,type:"SET_USER"})})),a}return Object(o.a)(n,[{key:"render",value:function(){return Object(D.jsx)(f.a,{store:ft,children:Object(D.jsx)(p.a,{children:Object(D.jsxs)(O.a,{className:"app",children:[Object(D.jsx)(O.a.Header,{style:{backgroundColor:"white"},children:Object(D.jsx)(z,{})}),Object(D.jsx)(O.a.Content,{className:"p-3",children:Object(D.jsxs)(l.d,{children:[Object(D.jsx)(l.b,{exact:!0,path:"/login",component:ut}),Object(D.jsx)(l.b,{exact:!0,path:"/logout",component:jt}),Object(D.jsx)(l.b,{exact:!0,path:"/acessDenied",component:lt}),Object(D.jsx)(l.b,{path:"/",component:ot})]})}),Object(D.jsx)(O.a.Footer,{style:{textAlign:"center"},children:Object(D.jsx)(R,{})})]})})})}}]),n}(a.Component);s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(Ot,{})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.7d0c6def.chunk.js.map