(this.webpackJsonplotus=this.webpackJsonplotus||[]).push([[0],{191:function(t,e,n){},210:function(t,e,n){},290:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(34),s=n.n(r),i=n(30),o=n(31),u=n(33),p=n(32),j=(n(191),n(192),n(45)),h=n(35),d=(n(193),n(111));d.a.apps.length?d.a.app():d.a.initializeApp({apiKey:"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs",authDomain:"data-492da.firebaseapp.com",databaseURL:"https://data-492da.firebaseio.com",projectId:"data-492da",storageBucket:"data-492da.appspot.com",messagingSenderId:"381903672681",appId:"1:381903672681:web:813cffbc63da30d11f99f8",measurementId:"G-CD4W02BEZ7"});var l=d.a,b=l.auth();function f(){return b.currentUser}function m(t,e){var n=l.auth().currentUser;n&&n.updateProfile({displayName:t}).then((function(){return e&&e()}))}function O(t,e){var n=l.auth().currentUser;n&&n.updateProfile({photoURL:t}).then((function(){return e&&e()}))}var x=function(t){return{data:t,type:"SET_USER"}},g=n(44),v=n(296),y=n(152),k=n(293),C=n(181),w=n(299),I=n(302),T=n(301),S=n(306),U=n(307),L=n(308),D=n(309),R=n.p+"static/media/lotus.3d5db4fb.png",z=n.p+"static/media/user.b326dd92.png",E=n(7),N=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t,e=z;this.props.app.user&&(e=this.props.app.user.photoURL,t=this.props.app.user.displayName);var n=Object(E.jsx)(y.a,{children:this.props.app.user?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(S.a,{}),children:Object(E.jsx)(j.b,{to:"/user/".concat(this.props.app.user.uid),children:"Trang c\xe1 nh\xe2n"})},"menu-setting"),Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(U.a,{}),children:Object(E.jsx)(j.b,{to:"/setting",children:"C\xe0i \u0110\u1eb7t"})},"menu-setting"),Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(L.a,{}),children:Object(E.jsx)(j.b,{to:"/logout",children:"\u0110\u0103ng xu\u1ea5t"})},"menu-logout")]}):Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(D.a,{}),children:Object(E.jsx)(j.b,{to:"/login",children:"\u0110\u0103ng nh\u1eadp"})},"menu-setting")}),a=Object(E.jsx)(k.a,{overlay:n,placement:"topRight",children:Object(E.jsx)(C.a,{className:"dropdown-toggle mt-2",shape:"square",size:45,icon:Object(E.jsx)(w.a,{src:e,preview:!1}),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"})},"header-dropdown");return Object(E.jsx)(I.a,{className:"p-0 m-0",title:Object(E.jsx)(w.a,{width:45,height:45,src:R,preview:!1}),subTitle:Object(E.jsx)(T.a.Text,{strong:!0,children:Object(E.jsx)(j.b,{style:{color:"#ff4d4f"},to:"/",children:"Home"})}),extra:[Object(E.jsx)(T.a.Text,{strong:!0,children:t}),a]})}}]),n}(a.Component),P=Object(g.b)((function(t){return{app:t.app}}))(N),B=n(303),M=n(57),A=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(B.a,{status:"404",title:"404",subTitle:"Kh\xf4ng t\xecm th\u1ea5y trang y\xeau c\u1ea7u!",extra:Object(E.jsx)(M.a,{type:"primary",children:Object(E.jsx)(j.b,{to:"/",children:"V\u1ec1 trang ch\u1ee7"})})})}}]),n}(a.Component),F=n(99),G=n(62),K=n(298),_=n(140),Q=n(98),W=n(182),q=n(305),H=n(294),J=n(295),V=n(186),X=(n(202),l.database());function Z(t,e){return X.ref(t).push(e).key}function Y(t,e){X.ref(t).child(e).remove()}n(291);var $=l.storage();function tt(t,e,n){$.ref(t).put(e).then((function(t){if(n){var e=t._delegate.metadata.fullPath;$.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function et(t,e,n){$.ref(t).putString(e,"data_url").then((function(t){if(n){var e=t._delegate.metadata.fullPath;$.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function nt(t){$.ref(t).delete().catch((function(t){return console.log(t)}))}var at=n(172),ct=n(310),rt=n(311),st=(n(210),function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).handleChange=function(t){t.saver.save().then((function(t){return a.setState({value:t})}))},a.reference=function(t){a.setState({editor:t})},a.submit=function(){a.props.submit&&(a.props.submit({comment:a.state.value,images:a.state.images}),a.state.editor.clear(),a.setState({images:[]}))},a.upload=function(t){if(a.state.images.length<9)for(var e=t.target.files,n=0;n<e.length;n++){var c=new FileReader;c.onload=a.load,c.readAsDataURL(e[n])}},a.load=function(t){if(a.state.images.length<9){var e=a.state.images;e.push({id:Date.now(),src:t.target.result}),e.forEach((function(t){1===e.length?t.size="100%":e.length>1&&e.length<=4?t.size="50%":e.length>4&&(t.size="33.33%")})),a.setState({images:e})}},a.state={value:{},editor:{},images:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.user;return Object(E.jsxs)(q.a,{actions:[Object(E.jsx)(ct.a,{onClick:this.submit},"send"),Object(E.jsx)(rt.a,{onClick:function(){return document.getElementById("uploader".concat(t.props.id)).click()}},"img")],children:[Object(E.jsx)(H.a,{author:e.displayName,avatar:Object(E.jsx)(w.a,{src:e.photoURL,preview:!1})}),Object(E.jsx)("div",{className:"editor-container border mb-2",children:Object(E.jsx)(at.a,{onChange:this.handleChange,instanceRef:this.reference})}),Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(G.a,{span:12,children:Object(E.jsx)(w.a.PreviewGroup,{children:this.state.images.map((function(t){return Object(E.jsx)(w.a,{width:t.size,src:t.src})}))})})}),Object(E.jsx)("input",{type:"file",id:"uploader".concat(this.props.id),accept:"image/png, image/gif, image/jpeg",onChange:this.upload,hidden:!0})]})}}]),n}(a.Component)),it=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).submit=function(t){var e={userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment},n=Z("/posts/".concat(a.props.data.key,"/comments/"),e);t.images.forEach((function(t){var e="/image-comments/".concat(t.id,".png");et(e,t.src,(function(t){return Z("/posts/".concat(a.props.data.key,"/comments/").concat(n,"/images/"),{src:e,link:t})}))}))},a.delete=function(){a.props.data.images.forEach((function(t){return nt(t.src)})),Y("/posts/",a.props.data.key),W.b.info("Xo\xe1 th\xe0nh c\xf4ng")},a.state={comments:[],comment:{time:1624457156027,blocks:[],version:"2.22.0"}},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"deleteComment",value:function(t){this.props.data.images.forEach((function(t){return nt(t.src)})),Y("/posts/".concat(this.props.data.key,"/comments/"),t),W.b.info("Xo\xe1 th\xe0nh c\xf4ng")}},{key:"render",value:function(){var t=this,e=this.props.data,n=this.props.app.user.uid===e.uid;return Object(E.jsx)(F.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(G.a,{xl:16,lg:18,md:20,sm:22,xs:24,children:Object(E.jsxs)(q.a,{children:[Object(E.jsx)(F.a,{children:Object(E.jsxs)(G.a,{span:24,justify:"center",children:[Object(E.jsx)(H.a,{author:e.author,avatar:e.avatar,content:e.content,datetime:Object(E.jsx)(E.Fragment,{children:n&&Object(E.jsx)(J.a,{title:"B\u1ea1n c\xf3 mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y kh\xf4ng?",onConfirm:this.delete,okText:"C\xf3",cancelText:"Kh\xf4ng",children:Object(E.jsx)(V.a,{})})})}),Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(G.a,{span:12,children:Object(E.jsx)(w.a.PreviewGroup,{children:e.images.map((function(t){return Object(E.jsx)(w.a,{width:t.size,src:t.link})}))})})})]})}),Object(E.jsx)(F.a,{children:Object(E.jsx)(G.a,{span:22,offset:1,children:e.comments.length>0&&Object(E.jsx)(K.b,{dataSource:e.comments,itemLayout:"horizontal",renderItem:function(e){var a=n||e.uid===t.props.app.user.uid;return Object(E.jsx)(K.b.Item,{children:Object(E.jsxs)(G.a,{span:24,justify:"center",children:[Object(E.jsx)(H.a,Object(Q.a)(Object(Q.a)({},e),{},{datetime:a&&Object(E.jsx)(J.a,{title:"B\u1ea1n c\xf3 mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y kh\xf4ng?",onConfirm:function(){return t.deleteComment(e.key)},okText:"C\xf3",cancelText:"Kh\xf4ng",children:Object(E.jsx)(V.a,{})})})),Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(G.a,{span:12,children:Object(E.jsx)(w.a.PreviewGroup,{children:e.images.map((function(t){return Object(E.jsx)(w.a,{width:t.size,src:t.link})}))})})})]})},Math.random())}})})}),Object(E.jsx)(F.a,{children:Object(E.jsx)(G.a,{span:22,offset:1,children:Object(E.jsx)(st,{id:e.key,user:this.props.app.user,submit:this.submit},e.key)})})]})})})}}]),n}(a.Component),ot=Object(g.b)((function(t){return{app:t.app}}))(it),ut=n(177),pt=n.n(ut);function jt(t){var e=[],n=function(n){var a=t[n],c=[],r=t[n].images;if(r)for(var s in r){var i=r[s];i.id=s,c.push(i)}c.forEach((function(t){1===c.length?t.size="100%":c.length>1&&c.length<=4?t.size="50%":c.length>4&&(t.size="33.33%")}));var o={key:n,uid:a.userId,author:a.author,avatar:Object(E.jsx)(j.b,{to:"/user/".concat(a.userId),children:Object(E.jsx)(C.a,{icon:Object(E.jsx)(w.a,{src:a.avatar,preview:!1})})}),content:Object(E.jsx)(pt.a,{data:a.content}),images:c};e.unshift(o)};for(var a in t)n(a);return e}var ht=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).loadMore=function(){a.setState({number:a.state.number+5}),a.load()},a.setData=function(t){var e=jt(t);e.forEach((function(e){return e.comments=jt(t[e.key].comments)})),a.setState({posts:e})},a.submit=function(t){var e=Z("/posts/",{userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment});t.images.forEach((function(t){var n="/image-posts/".concat(t.id,".png");et(n,t.src,(function(t){return Z("/posts/".concat(e,"/images/"),{src:n,link:t})}))}))},a.state={posts:[],number:5},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(t,e){t.match.params.uid!==this.props.match.params.uid&&this.load()}},{key:"load",value:function(){var t,e,n,a=this;this.props.match.params.uid?(t="/posts/",e=this.props.match.params.uid,n=function(t){a.setData(t)},X.ref(t).orderByChild("userId").equalTo(e).on("value",(function(t){return n&&n(t.val())}))):function(t,e,n){X.ref(t).limitToLast(e).on("value",(function(t){return n(t.val())}))}("/posts/",this.state.number,(function(t){a.setData(t)}))}},{key:"render",value:function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(G.a,{xl:12,lg:14,md:16,sm:18,xs:20,children:Object(E.jsx)(st,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit},Math.random())})}),Object(E.jsx)(K.b,{dataSource:this.state.posts,loadMore:Object(E.jsx)(F.a,{align:"center",children:Object(E.jsx)(G.a,{children:Object(E.jsx)(_.a,{onClick:this.loadMore})})}),renderItem:function(t){return Object(E.jsx)(ot,{data:t},t.key)}})]})}}]),n}(a.Component),dt=Object(g.b)((function(t){return{app:t.app}}))(ht),lt=n(135),bt={user:{}},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return t.user=e.data,Object(Q.a)(Object(Q.a)({},t),{},{user:e.data});default:return t}},mt=Object(lt.a)({app:ft}),Ot=Object(lt.b)(mt),xt=n(151),gt=n(300),vt=n(304),yt=n(297),kt=n(312),Ct=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).finish=function(t){console.log(t.username),m(t.username,(function(){Ot.dispatch(x(f())),W.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}))},t.upLoadFile=function(e){tt("/avatar/".concat(t.props.app.user.uid,".png"),e,(function(t){O(t,(function(){Ot.dispatch(x(f())),W.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}))}))},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this;return Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(G.a,{children:Object(E.jsxs)(xt.a,{defaultActiveKey:"1",centered:!0,children:[Object(E.jsx)(xt.a.TabPane,{tab:"Tab 1",children:Object(E.jsx)(q.a,{style:{width:300,background:"none"},children:Object(E.jsxs)(gt.a,{size:"middle",onFinish:this.finish,children:[Object(E.jsx)(gt.a.Item,{name:"username",children:Object(E.jsx)(vt.a,{})}),Object(E.jsx)(gt.a.Item,{wrapperCol:{offset:3,span:16},children:Object(E.jsx)(M.a,{type:"primary",htmlType:"submit",children:" C\u1eadp nh\u1eadt t\xean ng\u01b0\u1eddi d\xf9ng "})})]})})},"1"),Object(E.jsx)(xt.a.TabPane,{tab:"Tab 2",children:Object(E.jsx)(q.a,{style:{width:300,background:"none"},children:Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsxs)(G.a,{children:[Object(E.jsx)(C.a,{size:250,icon:Object(E.jsx)(w.a,{src:this.props.app.user.photoURL,preview:!1})}),Object(E.jsx)(F.a,{className:"pt-3",justify:"center",children:Object(E.jsx)(G.a,{children:Object(E.jsx)(yt.a,{fileList:[],beforeUpload:function(e){return t.upLoadFile(e),!1},children:Object(E.jsx)(M.a,{type:"primary",icon:Object(E.jsx)(kt.a,{}),children:"Upload file"})})})})]})})})},"2")]})})})}}]),n}(a.Component),wt=Object(g.b)((function(t){return{app:t.app}}))(Ct),It=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(E.jsx)(h.a,{to:"/acessDenied"}):Object(E.jsxs)(h.d,{children:[Object(E.jsx)(h.b,{exact:!0,path:"/",component:dt}),Object(E.jsx)(h.b,{exact:!0,path:"/user/:uid",component:dt}),Object(E.jsx)(h.b,{exact:!0,path:"/setting",component:wt}),Object(E.jsx)(h.b,{component:A})]})}}]),n}(a.Component),Tt=Object(g.b)((function(t){return{app:t.app}}))(It),St=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),function(t){var e=new l.auth.GoogleAuthProvider;b.signInWithPopup(e).then((function(e){return t&&t(e)}))}((function(){return a.props.history.push("/")})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),Ut=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a,c;return Object(i.a)(this,n),a=e.call(this,t),c=function(){return a.props.history.push("/acessDenied")},b.signOut().then((function(t){return c&&c(t)})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),Lt=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(E.jsx)(B.a,{status:"403",title:"403",subTitle:"B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp!"}):Object(E.jsx)(h.a,{to:"/"})}}]),n}(a.Component),Dt=Object(g.b)((function(t){return{app:t.app}}))(Lt),Rt=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a,c;return Object(i.a)(this,n),a=e.call(this,t),c=function(t){Ot.dispatch(x(t))},b.onAuthStateChanged((function(t){return c&&c(t)})),a}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(g.a,{store:Ot,children:Object(E.jsx)(j.a,{children:Object(E.jsxs)(v.a,{className:"app",children:[Object(E.jsx)(v.a.Header,{className:"px-3",style:{backgroundColor:"white"},children:Object(E.jsx)(P,{})}),Object(E.jsx)(v.a.Content,{className:"p-3",children:Object(E.jsxs)(h.d,{children:[Object(E.jsx)(h.b,{exact:!0,path:"/login",component:St}),Object(E.jsx)(h.b,{exact:!0,path:"/logout",component:Ut}),Object(E.jsx)(h.b,{exact:!0,path:"/acessDenied",component:Dt}),Object(E.jsx)(h.b,{path:"/",component:Tt})]})})]})})})}}]),n}(a.Component);s.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(Rt,{})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.f3f674cf.chunk.js.map