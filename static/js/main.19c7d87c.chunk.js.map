{"version":3,"sources":["firebase/firebase.js","firebase/auth.js","reducers/app/app.action.js","img/lotus.png","img/user.png","components/header/Header.js","components/footer/Footer.js","img/monk.png","firebase/database.js","firebase/storage.js","components/layout/Editor.js","components/view/posts/Post.js","components/view/posts/Posts.js","components/view/home/Home.js","components/view/Routing.js","reducers/app/app.reducer.js","reducers/root.reducer.js","store.js","App.js","index.js"],"names":["firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","onUserStateChange","action","onAuthStateChanged","user","Header","props","logout","rs","console","log","signOut","then","login","provider","GoogleAuthProvider","signInWithPopup","loginWithGoogle","state","avatar","setState","photoURL","menu","this","Item","icon","LoginOutlined","onClick","LogoutOutlined","dropdown","overlay","placement","className","size","src","preview","id","data-toggle","aria-haspopup","aria-expanded","title","width","height","lotus","subTitle","to","extra","Component","Footer","database","addRow","ref","data","push","key","storage","Editor","handleChange","event","saver","save","value","reference","editor","submit","comment","images","clear","upload","files","target","i","fileReader","FileReader","onload","Date","now","result","forEach","img","readAsDataURL","actions","SendOutlined","FileImageOutlined","document","getElementById","click","author","displayName","onChange","instanceRef","PreviewGroup","map","type","accept","multiple","hidden","Post","comments","Math","random","monk","content","datetime","DeleteOutlined","delete","image","path","catch","error","child","remove","message","info","time","blocks","version","post","isWriter","uid","userId","justify","xl","lg","md","sm","xs","span","link","offset","dataSource","itemLayout","renderItem","initValue","connect","store","Posts","loadMore","number","load","string","putString","fullPath","_delegate","metadata","getDownloadURL","posts","imgs","keyImg","unshift","limitToLast","on","val","align","DownOutlined","item","Home","Routing","exact","component","initialState","template","combineReducers","createStore","App","dispatch","style","backgroundColor","Content","textAlign","ReactDOM","render","StrictMode"],"mappings":"wPAaKA,IAASC,KAAKC,OAGfF,IAASG,MAFTH,IAASI,cAZA,CACTC,OAAQ,0CACRC,WAAY,6BACZC,YAAa,oCACbC,UAAW,aACXC,cAAe,yBACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBASJZ,QAAf,ECjBMa,EAAOb,EAASa,OAEf,SAASC,EAAkBC,GAC9BF,EAAKG,oBAAmB,SAACC,GAAD,OAAUF,EAAOE,MCLtC,I,gFCAQ,MAA0B,kCCA1B,MAA0B,iC,OCQpBC,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAeRC,OAAS,WJZJ,IAAiBL,IIaZ,SAACM,GAAD,OAAQC,QAAQC,IAAIF,IJZ5BR,EAAKW,UAAUC,MAAK,SAAAJ,GAAE,OAAIN,EAAOM,OILhB,EAoBnBK,MAAQ,YJrBH,SAAyBX,GAC5B,IAAIY,EAAW,IAAI3B,EAASa,KAAKe,mBACjCf,EAAKgB,gBAAgBF,GAAUF,MAAK,SAAAJ,GAAE,OAAIN,EAAOM,MIoBjDS,EAAgB,SAACT,GACfC,QAAQC,IAAIF,OApBd,EAAKU,MAAQ,CAACC,OAAQf,EAAMA,KAAM,MAFjB,E,qDAKnB,WAAqB,IAAD,OAClBH,GAAkB,SAACG,GACL,MAARA,EACF,EAAKgB,SAAS,CAACD,OAAQf,EAAKiB,SAAUjB,KAAMA,IAG5C,EAAKgB,SAAS,CAACD,OAAQf,EAAMA,KAAM,Y,oBAezC,WACE,IAAMkB,EACJ,cAAC,IAAD,UACuB,OAApBC,KAAKL,MAAMd,KACV,cAAC,IAAKoB,KAAN,CAAWC,KAAM,cAACC,EAAA,EAAD,IAAsCC,QAASJ,KAAKV,MAArE,qCAAwC,gBAGxC,cAAC,IAAKW,KAAN,CAAWC,KAAM,cAACG,EAAA,EAAD,IAAsCD,QAASJ,KAAKhB,OAArE,qCAAyC,iBAMzCsB,EACJ,cAAC,IAAD,CAAUC,QAASR,EAAMS,UAAU,WAAnC,SACE,cAAC,IAAD,CACEC,UAAU,uBACVC,KAAM,GACNR,KAAM,cAAC,IAAD,CAAOS,IAAKX,KAAKL,MAAMC,OAAQgB,SAAS,IAC9CC,GAAG,qBACHC,cAAY,WACZC,gBAAc,OACdC,gBAAc,WARgC,mBAYpD,OACE,cAAC,IAAD,CAAYP,UAAU,MAAMQ,MAAO,cAAC,IAAD,CAAOC,MAAO,GAAIC,OAAQ,GAAIR,IAAKS,EAAOR,SAAS,IAAWS,SAAU,cAAC,IAAD,CAAMC,GAAG,IAAT,kBAA0BC,MAAO,CAACjB,S,GAtD/GkB,aCNfC,E,4JACnB,WACE,MAAO,6C,GAFyBD,a,+FCFrB,MAA0B,iCCEnCE,EAAW9D,EAAS8D,WAUnB,SAASC,EAAOC,EAAKC,GACxB,OAAOH,EAASE,IAAIA,GAAKE,KAAKD,GAAME,ICXxC,IAAMC,EAAUpE,EAASoE,U,+BCIJC,G,yDACpB,WAAYlD,GAAQ,IAAD,8BAClB,cAAMA,IAGPmD,aAAe,SAACC,GACfA,EAAMC,MAAMC,OAAOhD,MAAK,SAAAwC,GAAI,OAAI,EAAKhC,SAAS,CAACyC,MAAOT,QALpC,EAOnBU,UAAY,SAACC,GACZ,EAAK3C,SAAS,CAAC2C,OAAQA,KARL,EAUnBC,OAAS,WACJ,EAAK1D,MAAM0D,SACd,EAAK1D,MAAM0D,OAAO,CAACC,QAAS,EAAK/C,MAAM2C,MAAOK,OAAQ,EAAKhD,MAAMgD,SACjE,EAAKhD,MAAM6C,OAAOI,QAClB,EAAK/C,SAAS,CAAC8C,OAAQ,OAdN,EAiBnBE,OAAS,SAACV,GACT,GAAI,EAAKxC,MAAMgD,OAAO7E,OAAS,EAE9B,IADA,IAAIgF,EAAQX,EAAMY,OAAOD,MAChBE,EAAI,EAAGA,EAAIF,EAAMhF,OAAQkF,IAAK,CACtC,IAAMC,EAAa,IAAIC,WACvBD,EAAWE,OAAS,SAAClE,GACpB,GAAI,EAAKU,MAAMgD,OAAO7E,OAAS,EAAG,CACjC,IAAI6E,EAAS,EAAKhD,MAAMgD,OACxBA,EAAOb,KAAK,CAACjB,GAAIuC,KAAKC,MAAO1C,IAAK1B,EAAG8D,OAAOO,SAC5CX,EAAOY,SAAQ,SAAAC,GACO,GAAjBb,EAAO7E,OACV0F,EAAI9C,KAAO,OACDiC,EAAO7E,OAAS,GAAK6E,EAAO7E,QAAU,EAChD0F,EAAI9C,KAAO,MACDiC,EAAO7E,OAAS,IAC1B0F,EAAI9C,KAAO,aAGb,EAAKb,SAAS,CAAC8C,OAAQA,MAGzBM,EAAWQ,cAAcX,EAAME,MApCjC,EAAKrD,MAAQ,CAAC2C,MAAO,GAAIE,OAAQ,GAAIG,OAAQ,IAF3B,E,0CA0CnB,WACC,IAAM9D,EAAOmB,KAAKjB,MAAMF,KACxB,OACC,eAAC,IAAD,CACC6E,QAAS,CACR,cAACC,EAAA,EAAD,CAAyBvD,QAASJ,KAAKyC,QAArB,QAClB,cAACmB,EAAA,EAAD,CAA6BxD,QAAS,kBAAMyD,SAASC,eAAe,mBAAmBC,UAAhE,QAHzB,UAMC,cAAC,IAAD,CAASC,OAAQnF,EAAKoF,YAAarE,OAAQ,cAAC,IAAD,CAAOe,IAAK9B,EAAKiB,SAAUc,SAAS,MAC/E,qBAAKH,UAAU,0BAAf,SACC,cAAC,IAAD,CAAUyD,SAAUlE,KAAKkC,aAAciC,YAAanE,KAAKuC,cAE1D,cAAC,IAAM6B,aAAP,UAEEpE,KAAKL,MAAMgD,OAAO0B,KAAI,SAAAb,GAAG,OAAI,cAAC,IAAD,CAAOtC,MAAOsC,EAAI9C,KAAMC,IAAK6C,EAAI7C,WAGhE,uBAAO2D,KAAK,OAAOzD,GAAG,kBAAkB0D,OAAO,mCAAmCL,SAAUlE,KAAK6C,OAAQ2B,UAAQ,EAACC,QAAM,W,GA7DxFjD,c,kBCI9BkD,E,kDACL,WAAY3F,GAAQ,IAAD,8BAClB,cAAMA,IAKP0D,OAAS,SAACZ,GACT,EAAKhC,SAAS,CACb8E,SAAS,GAAD,mBACJ,EAAKhF,MAAMgF,UADP,CAEP,CACC5C,IAAK6C,KAAKC,SACVb,OAAQ,UACRpE,OAAQkF,EACRC,QAAS,cAAC,IAAD,CAAQlD,KAAMA,EAAKa,UAC5BsC,SAAU,CAAC,cAACC,EAAA,EAAD,QAEVvC,QAAS,MAjBK,EAoBnBwC,OAAS,WACR,IHhBwBtD,EAAKf,EGgBhB,EAAK9B,MAAM8C,KAAKc,OACtBY,SAAQ,SAAA4B,GAAK,OFVKC,EEUUD,EAAMxE,SFTvCqB,EAAQJ,IAAIwD,GAAMF,SAASG,OAAM,SAAAC,GAAK,OAAIpG,QAAQC,IAAImG,MADnD,IAAoBF,KDPDxD,EGkBd,UHlBmBf,EGkBR,EAAK9B,MAAM8C,KAAKE,IHjBnCL,EAASE,IAAIA,GAAK2D,MAAM1E,GAAI2E,SGkB9BC,IAAQC,KAAK,4BAtBb,EAAK/F,MAAQ,CAACgF,SAAU,GAAIjC,QAAS,CAACiD,KAAM,cAAeC,OAAQ,GAAIC,QAAS,WAF9D,E,qDAInB,c,oBAsBA,WACC,IAAIC,EAAO9F,KAAKjB,MAAM8C,KAClBkE,EAAW/F,KAAKjB,MAAMhB,IAAIc,KAAKmH,MAAQF,EAAKG,OAChD,OACC,cAAC,IAAD,CAAKC,QAAQ,SAASzF,UAAU,OAAhC,SACC,cAAC,IAAD,CAAK0F,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzC,SACC,eAAC,IAAD,WACC,cAAC,IAAD,UACC,eAAC,IAAD,CAAKC,KAAM,GAAIN,QAAQ,SAAvB,UACC,cAAC,IAAD,CAASlC,OAAQ8B,EAAK9B,OAAQpE,OAAQkG,EAAKlG,OAAQmF,QAASe,EAAKf,QAASC,SACzE,mCAAGe,GAAY,cAACd,EAAA,EAAD,CAAgB7E,QAASJ,KAAKkF,aAC9C,cAAC,IAAD,CAAKgB,QAAQ,SAAb,SACC,cAAC,IAAD,CAAKM,KAAM,GAAX,SACC,cAAC,IAAMpC,aAAP,UAEE0B,EAAKnD,OAAO0B,KAAI,SAAAb,GAAG,OAAI,cAAC,IAAD,CAAOtC,MAAOsC,EAAI9C,KAAMC,IAAK6C,EAAIiD,qBAO9D,cAAC,IAAD,UACC,cAAC,IAAD,CAAKD,KAAM,GAAIE,OAAQ,EAAvB,SAEQ1G,KAAKL,MAAMgF,SAAS7G,OAAS,GACnC,cAAC,IAAD,CACC6I,WAAY3G,KAAKL,MAAMgF,SACvBiC,WAAW,aACXC,WAAY,SAAA9H,GAAK,OAAI,cAAC,IAAKkB,KAAN,UAA2B,cAAC,IAAD,eAAalB,KAAxBA,EAAMgD,YAK/C,cAAC,IAAD,UACC,cAAC,IAAD,CAAKyE,KAAM,GAAIE,OAAQ,EAAvB,SACC,cAAC,EAAD,CAAQ7H,KAAMmB,KAAKjB,MAAMhB,IAAIc,KAAMiI,UAAW9G,KAAKL,MAAM+C,QAASD,OAAQzC,KAAKyC,wB,GA/DpEjB,aA6EJuF,eALS,SAACC,GACxB,MAAO,CACNjJ,IAAKiJ,EAAMjJ,OAGEgJ,CAAyBrC,GC7ElCuC,E,kDACL,WAAYlI,GAAQ,IAAD,8BAClB,cAAMA,IAMPmI,SAAW,WACV,EAAKrH,SAAS,CAACsH,OAAQ,EAAKxH,MAAMwH,OAAS,IAC3C,EAAKC,QATa,EA6CnB3E,OAAS,SAACZ,GACT,IAOIE,EAAMJ,EAAO,UANjB,CACCsE,OAAQ,EAAKlH,MAAMhB,IAAIc,KAAKmH,IAC5BhC,OAAQ,EAAKjF,MAAMhB,IAAIc,KAAKoF,YAC5BrE,OAAQ,EAAKb,MAAMhB,IAAIc,KAAKiB,SAC5BiF,QAASlD,EAAKa,UAGfb,EAAKc,OAAOY,SAAQ,SAAAC,GACnB,IHrDkC4B,EAAMiC,EAAQ1I,EGqD5C8H,EAAI,uBAAmBjD,EAAI3C,GAAvB,QHrD0BuE,EGsDbqB,EHtDmBY,EGsDb7D,EAAI7C,IHtDiBhC,EGsDZ,SAACkD,GAAD,OAAUF,EAAO,UAAD,OAAWI,EAAX,YAA0B,CAACpB,IAAK8F,EAAMA,KAAM5E,KHrDrFG,EAAQJ,IAAIwD,GAClBkC,UAAUD,EAAQ,YAAYhI,MAAK,SAAAJ,GACnC,GAAIN,EAAQ,CACR,IAAI4I,EAAWtI,EAAGuI,UAAUC,SAASF,SACrCvF,EAAQJ,IAAI2F,GAAUG,iBAAiBrI,MAAK,SAAAJ,GAAE,OAAIN,EAAOM,cGLnE,EAAKU,MAAQ,CAACgI,MAAO,GAAIR,OAAQ,GAFf,E,qDAInB,WACCnH,KAAKoH,S,kBAMN,WAAQ,IJbsBxF,EAAKuF,EAAQxI,EIapC,OJbuBiD,EIcd,UJdmBuF,EIcRnH,KAAKL,MAAMwH,OJdKxI,EIcG,SAAAM,GAC5C,IAAI4C,EAAO,GADuC,WAEzCE,GACR,IAAIY,EAAS,GACTmD,EAAO7G,EAAG8C,GACV6F,EAAO3I,EAAG8C,GAAKY,OACnB,GAAIiF,EACH,IAAK,IAAIC,KAAUD,EAClBjF,EAAOb,KAAK8F,EAAKC,IAGnBlF,EAAOY,SAAQ,SAAAC,GACO,GAAjBb,EAAO7E,OACV0F,EAAI9C,KAAO,OACDiC,EAAO7E,OAAS,GAAK6E,EAAO7E,QAAU,EAChD0F,EAAI9C,KAAO,MACDiC,EAAO7E,OAAS,IAC1B0F,EAAI9C,KAAO,aAGb,IAAI2D,EAAM,CACTtC,IAAKA,EACLkE,OAAQH,EAAKG,OACbjC,OAAQ8B,EAAK9B,OACbpE,OAAQkG,EAAKlG,OACbmF,QAAS,cAAC,IAAD,CAAQlD,KAAMiE,EAAKf,UAC5BpC,OAAQA,GAETd,EAAKiG,QAAQzD,IA1Bd,IAAK,IAAItC,KAAO9C,EAAK,EAAZ8C,GA4BT,EAAKlC,SAAS,CAAC8H,MAAO9F,KJ3CrBH,EAASE,IAAIA,GAAKmG,YAAYZ,GAAQa,GAAG,SAAS,SAAA/I,GAAE,OAAIN,EAAOM,EAAGgJ,Y,oBI4DrE,WACC,OACC,qCACC,cAAC,IAAD,CAAK/B,QAAQ,SAASzF,UAAU,OAAhC,SACC,cAAC,IAAD,CAAK0F,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzC,SACC,cAAC,EAAD,CAAQ1H,KAAMmB,KAAKjB,MAAMhB,IAAIc,KAAMiI,UAAW9G,KAAKL,MAAM+C,QAASD,OAAQzC,KAAKyC,aAGjF,cAAC,IAAD,CAAMkE,WAAY3G,KAAKL,MAAMgI,MAC5BT,SAAU,cAAC,IAAD,CAAKgB,MAAM,SAAX,SAAoB,cAAC,IAAD,UAAK,cAACC,EAAA,EAAD,CAAc/H,QAASJ,KAAKkH,eAC/DL,WAAY,SAAAuB,GAAI,OAAI,cAAC,EAAD,CAAqBvG,KAAMuG,GAAhBA,EAAKrG,e,GAtErBP,aAgFLuF,gBALS,SAACC,GACxB,MAAO,CACNjJ,IAAKiJ,EAAMjJ,OAGEgJ,CAAyBE,GCvFnBoB,G,4JACpB,WACC,OACC,cAAC,GAAD,GAAYjF,KAAKC,W,GAHc7B,aCE5B8G,G,kDACL,WAAYvJ,GAAQ,IAAD,8BAClB,cAAMA,IACDY,MAAQ,CAACd,KAAM,MAFF,E,0CAInB,WACC,OAA4B,OAAxBmB,KAAKjB,MAAMhB,IAAIc,KACX,wBAIN,cAAC,IAAD,UACC,cAAC,IAAD,CAAkB0J,OAAK,EAACnD,KAAK,IAAIoD,UAAWH,IAAjC,c,GAZM7G,aAuBPuF,gBALS,SAACC,GACxB,MAAO,CACNjJ,IAAKiJ,EAAMjJ,OAGEgJ,CAAyBuB,I,UC5BlCG,GAAe,CACnB5J,KAAM,IAaO6J,GAVE,WAAmC,IAAlC/I,EAAiC,uDAAzB8I,GAAc9J,EAAW,uCACjD,OAAQA,EAAO2F,MACb,IAAK,WAEH,OADA3E,EAAMd,KAAOF,EAAOkD,KACb,2BAAIlC,GAAX,IAAkBd,KAAMF,EAAOkD,OACjC,QACE,OAAOlC,ICREgJ,gBAAgB,CAAC5K,SCCjB6K,gBAAYD,ICqCZE,G,kDA1Bd,WAAY9J,GAAQ,IAAD,6BAClB,cAAMA,GACNL,GAAkB,SAAAG,GACjBmI,GAAM8B,ShBhBE,CACHjH,KgBekBhD,EhBdlByF,KAAM,gBgBWM,E,0CAMnB,WACC,OACC,cAAC,IAAD,CAAU0C,MAAOA,GAAjB,SACC,cAAC,IAAD,UACC,eAAC,IAAD,CAAQvG,UAAU,MAAlB,UACC,cAAC,IAAO3B,OAAR,CAAeiK,MAAO,CAACC,gBAAiB,SAAxC,SACC,cAAC,EAAD,MAED,cAAC,IAAOC,QAAR,CAAgBxI,UAAU,MAA1B,SACC,cAAC,GAAD,MAED,cAAC,IAAOgB,OAAR,CAAesH,MAAO,CAACG,UAAW,UAAlC,SACC,cAAC,EAAD,iB,GAnBW1H,aCTlB2H,IAASC,OACR,cAAC,IAAMC,WAAP,UACC,cAAC,GAAD,MAEDxF,SAASC,eAAe,W","file":"static/js/main.19c7d87c.chunk.js","sourcesContent":["import firebase from 'firebase';\n\nlet config = {\n    apiKey: \"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs\",\n    authDomain: \"data-492da.firebaseapp.com\",\n    databaseURL: \"https://data-492da.firebaseio.com\",\n    projectId: \"data-492da\",\n    storageBucket: \"data-492da.appspot.com\",\n    messagingSenderId: \"381903672681\",\n    appId: \"1:381903672681:web:813cffbc63da30d11f99f8\",\n    measurementId: \"G-CD4W02BEZ7\"\n};\n\nif (!firebase.apps.length) {\n    firebase.initializeApp(config);\n} else {\n    firebase.app();\n}\n\nexport default firebase;\n","import firebase from './firebase';\n\nconst auth = firebase.auth();\n\nexport function onUserStateChange(action) {\n    auth.onAuthStateChanged((user) => action(user));\n}\n\nexport function loginWithGoogle(action) {\n    let provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(rs => action(rs))\n}\n\nexport function signOut(action) {\n    auth.signOut().then(rs => action(rs))\n}\n\n","export const setUser = (data) => {\n    return {\n        data: data,\n        type: \"SET_USER\",\n    };\n};\n","export default __webpack_public_path__ + \"static/media/lotus.3d5db4fb.png\";","export default __webpack_public_path__ + \"static/media/user.b326dd92.png\";","import React, {Component} from \"react\";\nimport {Link} from 'react-router-dom';\nimport {Menu, PageHeader, Dropdown, Avatar, Image} from 'antd';\nimport {LogoutOutlined, LoginOutlined} from \"@ant-design/icons\";\nimport {signOut, loginWithGoogle, onUserStateChange} from '../../firebase/auth'\nimport lotus from '../../img/lotus.png'\nimport user from '../../img/user.png'\n\nexport default class Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {avatar: user, user: null};\n  }\n\n  componentDidMount() {\n    onUserStateChange((user) => {\n      if (user != null) {\n        this.setState({avatar: user.photoURL, user: user})\n      }\n      else {\n        this.setState({avatar: user, user: null});\n      }\n    })\n  }\n\n  logout = () => {\n    signOut((rs) => console.log(rs));\n  }\n\n  login = () => {\n    loginWithGoogle((rs) => {\n      console.log(rs)\n    })\n  }\n\n  render() {\n    const menu = (\n      <Menu>\n        {this.state.user === null ?\n          <Menu.Item icon={<LoginOutlined />} key=\"menu-setting\" onClick={this.login}>\n            Đăng nhập\n        </Menu.Item> :\n          <Menu.Item icon={<LogoutOutlined />} key=\"menu-logout\" onClick={this.logout}>\n            Đăng xuất\n        </Menu.Item>\n        }\n      </Menu>\n    );\n    const dropdown = (\n      <Dropdown overlay={menu} placement=\"topRight\" key=\"header-dropdown\">\n        <Avatar\n          className=\"dropdown-toggle mt-2\"\n          size={45}\n          icon={<Image src={this.state.avatar} preview={false} />}\n          id=\"dropdownMenuButton\"\n          data-toggle=\"dropdown\"\n          aria-haspopup=\"true\"\n          aria-expanded=\"false\"\n        />\n      </Dropdown>\n    );\n    return (\n      <PageHeader className=\"p-0\" title={<Image width={45} height={45} src={lotus} preview={false} />} subTitle={<Link to='/'>Home</Link>} extra={[dropdown]} />\n    );\n  }\n}\n","import {Component} from \"react\";\n\nexport default class Footer extends Component {\n  render() {\n    return \"Ant Design ©2018 Created by Ant UED\";\n  }\n}\n\n","export default __webpack_public_path__ + \"static/media/monk.28981645.png\";","import firebase from './firebase'\n\nconst database = firebase.database();\nexport function getRow(ref, action) {\n    database.ref(ref).on('value', rs => action(rs.val()))\n}\nexport function getRowFromFirst(ref, number, action) {\n    database.ref(ref).limitToFirst(number).on('value', rs => action(rs.val()))\n}\nexport function getRowFromLast(ref, number, action) {\n    database.ref(ref).limitToLast(number).on('value', rs => action(rs.val()))\n}\nexport function addRow(ref, data) {\n    return database.ref(ref).push(data).key\n}\n\nexport function deleteRow(ref, id) {\n    database.ref(ref).child(id).remove()\n}\n\nexport function editRow(ref, id, data) {\n    database.ref(ref).child(id).update(data)\n}\n\nexport function demo() {\n    //database.ref().child('posts').push({demo: ''}).then(rs=>console.log(rs));\n    //database.ref('posts').once('value', snap => {\n    //if (!snap.exists()) {\n    //}\n    //})\n}\n","import firebase from './firebase'\n\nconst storage = firebase.storage();\n\nexport function uploadFile(path, file, action) {\n    let ref = storage.ref(path);\n    ref.put(file).then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    });\n}\nexport function uploadFileFromString(path, string, action) {\n    let ref = storage.ref(path);\n    ref.putString(string, 'data_url').then(rs => {\n        if (action) {\n            let fullPath = rs._delegate.metadata.fullPath;\n            storage.ref(fullPath).getDownloadURL().then(rs => action(rs))\n        }\n    })\n}\n\nexport function deleteFile(path) {\n    storage.ref(path).delete().catch(error => console.log(error));\n}\n","import React, {Component} from \"react\";\nimport EditorJs from 'react-editor-js';\nimport {Comment, Card, Image} from 'antd';\nimport {FileImageOutlined, SendOutlined} from \"@ant-design/icons\";\nimport './editor.css';\n\nexport default class Editor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {value: {}, editor: {}, images: []}\n\t}\n\thandleChange = (event) => {\n\t\tevent.saver.save().then(data => this.setState({value: data}))\n\t}\n\treference = (editor) => {\n\t\tthis.setState({editor: editor})\n\t}\n\tsubmit = () => {\n\t\tif (this.props.submit) {\n\t\t\tthis.props.submit({comment: this.state.value, images: this.state.images})\n\t\t\tthis.state.editor.clear();\n\t\t\tthis.setState({images: []})\n\t\t}\n\t}\n\tupload = (event) => {\n\t\tif (this.state.images.length < 9) {\n\t\t\tlet files = event.target.files\n\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\tconst fileReader = new FileReader();\n\t\t\t\tfileReader.onload = (rs) => {\n\t\t\t\t\tif (this.state.images.length < 9) {\n\t\t\t\t\t\tlet images = this.state.images;\n\t\t\t\t\t\timages.push({id: Date.now(), src: rs.target.result})\n\t\t\t\t\t\timages.forEach(img => {\n\t\t\t\t\t\t\tif (images.length == 1) {\n\t\t\t\t\t\t\t\timg.size = '100%'\n\t\t\t\t\t\t\t} else if (images.length > 1 && images.length <= 4) {\n\t\t\t\t\t\t\t\timg.size = '50%'\n\t\t\t\t\t\t\t} else if (images.length > 4) {\n\t\t\t\t\t\t\t\timg.size = '33.33%'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.setState({images: images})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfileReader.readAsDataURL(files[i]);\n\t\t\t}\n\t\t}\n\t}\n\trender() {\n\t\tconst user = this.props.user\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tactions={[\n\t\t\t\t\t<SendOutlined key='send' onClick={this.submit} />,\n\t\t\t\t\t<FileImageOutlined key='img' onClick={() => document.getElementById('editor-uploader').click()} />,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Comment author={user.displayName} avatar={<Image src={user.photoURL} preview={false} />} />\n\t\t\t\t<div className='editor-container border'>\n\t\t\t\t\t<EditorJs onChange={this.handleChange} instanceRef={this.reference} />\n\t\t\t\t</div>\n\t\t\t\t<Image.PreviewGroup>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.images.map(img => <Image width={img.size} src={img.src} />)\n\t\t\t\t\t}\n\t\t\t\t</Image.PreviewGroup>\n\t\t\t\t<input type=\"file\" id='editor-uploader' accept=\"image/png, image/gif, image/jpeg\" onChange={this.upload} multiple hidden />\n\t\t\t</Card>\n\t\t)\n\t}\n}\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Comment, Avatar, Row, Col, List, Card, Image, message} from 'antd';\nimport {DeleteOutlined} from \"@ant-design/icons\";\nimport monk from '../../../img/monk.png';\nimport {deleteRow} from '../../../firebase/database';\nimport {deleteFile} from '../../../firebase/storage';\nimport Editor from '../../layout/Editor'\nimport Output from 'editorjs-react-renderer';\n\nclass Post extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {comments: [], comment: {time: 1624457156027, blocks: [], version: \"2.22.0\"}}\n\t}\n\tcomponentDidMount() {\n\t}\n\tsubmit = (data) => {\n\t\tthis.setState({\n\t\t\tcomments: [\n\t\t\t\t...this.state.comments,\n\t\t\t\t{\n\t\t\t\t\tkey: Math.random(),\n\t\t\t\t\tauthor: 'MacKeNo',\n\t\t\t\t\tavatar: monk,\n\t\t\t\t\tcontent: <Output data={data.comment} />,\n\t\t\t\t\tdatetime: [<DeleteOutlined />]\n\t\t\t\t}\n\t\t\t], comment: {}\n\t\t});\n\t}\n\tdelete = () => {\n\t\tlet images = this.props.data.images;\n\t\timages.forEach(image => deleteFile(image.src))\n\t\tdeleteRow('/posts/', this.props.data.key);\n\t\tmessage.info('Xoá thành công');\n\t}\n\trender() {\n\t\tlet post = this.props.data\n\t\tlet isWriter = this.props.app.user.uid === post.userId\n\t\treturn (\n\t\t\t<Row justify=\"center\" className='mb-4'>\n\t\t\t\t<Col xl={16} lg={18} md={20} sm={22} xs={24}>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={24} justify=\"center\">\n\t\t\t\t\t\t\t\t<Comment author={post.author} avatar={post.avatar} content={post.content} datetime={\n\t\t\t\t\t\t\t\t\t<>{isWriter && <DeleteOutlined onClick={this.delete} />}</>} />\n\t\t\t\t\t\t\t\t<Row justify='center'>\n\t\t\t\t\t\t\t\t\t<Col span={12}>\n\t\t\t\t\t\t\t\t\t\t<Image.PreviewGroup>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tpost.images.map(img => <Image width={img.size} src={img.link} />)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</Image.PreviewGroup>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={22} offset={1}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis, this.state.comments.length > 0 &&\n\t\t\t\t\t\t\t\t\t<List\n\t\t\t\t\t\t\t\t\t\tdataSource={this.state.comments}\n\t\t\t\t\t\t\t\t\t\titemLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\trenderItem={props => <List.Item key={props.key}><Comment {...props} /></List.Item>}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col span={22} offset={1}>\n\t\t\t\t\t\t\t\t<Editor user={this.props.app.user} initValue={this.state.comment} submit={this.submit} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Card>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(Post);\n\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Row, Col, Image, List} from 'antd';\nimport {DownOutlined} from \"@ant-design/icons\";\nimport Post from './Post';\nimport Editor from '../../layout/Editor'\nimport {uploadFileFromString} from '../../../firebase/storage';\nimport {getRow, getRowFromLast, addRow} from '../../../firebase/database'\nimport Output from 'editorjs-react-renderer';\n\nclass Posts extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {posts: [], number: 5}\n\t}\n\tcomponentDidMount() {\n\t\tthis.load()\n\t}\n\tloadMore = () => {\n\t\tthis.setState({number: this.state.number + 1})\n\t\tthis.load();\n\t}\n\tload() {\n\t\tgetRowFromLast('/posts/', this.state.number, rs => {\n\t\t\tlet data = [];\n\t\t\tfor (let key in rs) {\n\t\t\t\tlet images = []\n\t\t\t\tlet post = rs[key]\n\t\t\t\tlet imgs = rs[key].images\n\t\t\t\tif (imgs) {\n\t\t\t\t\tfor (let keyImg in imgs) {\n\t\t\t\t\t\timages.push(imgs[keyImg])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\timages.forEach(img => {\n\t\t\t\t\tif (images.length == 1) {\n\t\t\t\t\t\timg.size = '100%'\n\t\t\t\t\t} else if (images.length > 1 && images.length <= 4) {\n\t\t\t\t\t\timg.size = '50%'\n\t\t\t\t\t} else if (images.length > 4) {\n\t\t\t\t\t\timg.size = '33.33%'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tlet map = {\n\t\t\t\t\tkey: key,\n\t\t\t\t\tuserId: post.userId,\n\t\t\t\t\tauthor: post.author,\n\t\t\t\t\tavatar: post.avatar,\n\t\t\t\t\tcontent: <Output data={post.content} />,\n\t\t\t\t\timages: images\n\t\t\t\t}\n\t\t\t\tdata.unshift(map);\n\t\t\t}\n\t\t\tthis.setState({posts: data})\n\t\t})\n\t}\n\tsubmit = (data) => {\n\t\tlet post =\n\t\t{\n\t\t\tuserId: this.props.app.user.uid,\n\t\t\tauthor: this.props.app.user.displayName,\n\t\t\tavatar: this.props.app.user.photoURL,\n\t\t\tcontent: data.comment,\n\t\t}\n\t\tlet key = addRow('/posts/', post)\n\t\tdata.images.forEach(img => {\n\t\t\tlet link = `/image-posts/${img.id}.png`\n\t\t\tuploadFileFromString(link, img.src, (data) => addRow(`/posts/${key}/images/`, {src: link, link: data}))\n\t\t})\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Row justify='center' className='mb-4'>\n\t\t\t\t\t<Col xl={12} lg={14} md={16} sm={18} xs={20}>\n\t\t\t\t\t\t<Editor user={this.props.app.user} initValue={this.state.comment} submit={this.submit} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<List dataSource={this.state.posts}\n\t\t\t\t\tloadMore={<Row align='center'><Col><DownOutlined onClick={this.loadMore} /></Col></Row>}\n\t\t\t\t\trenderItem={item => <Post key={item.key} data={item} />} />\n\t\t\t</>);\n\t}\n}\n\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(Posts);\n\n","import React, {Component} from \"react\";\nimport Posts from \"../posts/Posts\"\n\nexport default class Home extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Posts key={Date.now()} />\n\t\t);\n\t}\n}\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {Route, Switch} from \"react-router-dom\";\nimport Home from './home/Home';\n\nclass Routing extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {user: null};\n\t}\n\trender() {\n\t\tif (this.props.app.user === null) {\n\t\t\treturn <div></div>;\n\t\t}\n\t\telse {\n\t\t\treturn (\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route key='home' exact path='/' component={Home} />\n\t\t\t\t</Switch>\n\t\t\t);\n\t\t}\n\t}\n}\nconst mapStateToProps = (store) => {\n\treturn {\n\t\tapp: store.app,\n\t};\n};\nexport default connect(mapStateToProps)(Routing);\n","const initialState = {\n  user: {}\n};\n\nconst template = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_USER\":\n      state.user = action.data;\n      return {...state, user: action.data};\n    default:\n      return state;\n  }\n};\n\nexport default template;\n","import {combineReducers} from 'redux';\nimport app from './app/app.reducer';\nexport default combineReducers({app});\n","import {createStore} from 'redux';\nimport combineReducers from './reducers/root.reducer';\n\nexport default createStore(combineReducers);\n\n","import './App.css';\nimport 'antd/dist/antd.css';\nimport React, {Component} from \"react\";\nimport {HashRouter, Route, Switch} from \"react-router-dom\";\nimport {onUserStateChange} from './firebase/auth'\nimport {setUser} from './reducers/app/app.action'\nimport {Provider} from \"react-redux\";\nimport {Layout} from 'antd';\nimport Header from './components/header/Header';\nimport Footer from './components/footer/Footer'\nimport Routing from './components/view/Routing'\nimport store from './store';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tonUserStateChange(user => {\n\t\t\tstore.dispatch(setUser(user))\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Provider store={store}>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Layout className=\"app\">\n\t\t\t\t\t\t<Layout.Header style={{backgroundColor: \"white\"}}>\n\t\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t</Layout.Header>\n\t\t\t\t\t\t<Layout.Content className=\"p-3\">\n\t\t\t\t\t\t\t<Routing />\n\t\t\t\t\t\t</Layout.Content>\n\t\t\t\t\t\t<Layout.Footer style={{textAlign: 'center'}}>\n\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t</Layout.Footer>\n\t\t\t\t\t</Layout>\n\t\t\t\t</HashRouter>\n\t\t\t</Provider>);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}