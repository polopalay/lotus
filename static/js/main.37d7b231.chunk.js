(this.webpackJsonplotus=this.webpackJsonplotus||[]).push([[0],{192:function(t,e,n){},291:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(35),s=n.n(r),i=n(27),o=n(28),u=n(30),j=n(29),p=(n(192),n(193),n(44)),d=n(36),l=(n(194),n(111));l.a.apps.length?l.a.app():l.a.initializeApp({apiKey:"AIzaSyAIYQGiQcSjZBw9LQ9LcR1yh8uDWtsMfgs",authDomain:"data-492da.firebaseapp.com",databaseURL:"https://data-492da.firebaseio.com",projectId:"data-492da",storageBucket:"data-492da.appspot.com",messagingSenderId:"381903672681",appId:"1:381903672681:web:813cffbc63da30d11f99f8",measurementId:"G-CD4W02BEZ7"});var h=l.a,b=h.auth();function m(){return b.currentUser}function O(t,e){var n=h.auth().currentUser;n&&n.updateProfile({displayName:t}).then((function(){return e&&e()}))}function f(t,e){var n=h.auth().currentUser;n&&n.updateProfile({photoURL:t}).then((function(){return e&&e()}))}var x=function(t){return{data:t,type:"SET_USER"}},g=n(42),v=n(297),y=n(153),k=n(294),C=n(182),w=n(300),N=n(304),I=n(302),S=n(308),T=n(309),U=n(310),D=n(311),L=n.p+"static/media/lotus.3d5db4fb.png",R=n.p+"static/media/user.b326dd92.png",E=n(7),P=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t,e=R;this.props.app.user&&(e=this.props.app.user.photoURL,t=this.props.app.user.displayName);var n=Object(E.jsx)(y.a,{children:this.props.app.user?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(S.a,{}),children:Object(E.jsx)(p.b,{to:"/user/".concat(this.props.app.user.uid),children:"Trang c\xe1 nh\xe2n"})},"menu-setting"),Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(T.a,{}),children:Object(E.jsx)(p.b,{to:"/setting",children:"C\xe0i \u0110\u1eb7t"})},"menu-setting"),Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(U.a,{}),children:Object(E.jsx)(p.b,{to:"/logout",children:"\u0110\u0103ng xu\u1ea5t"})},"menu-logout")]}):Object(E.jsx)(y.a.Item,{icon:Object(E.jsx)(D.a,{}),children:Object(E.jsx)(p.b,{to:"/login",children:"\u0110\u0103ng nh\u1eadp"})},"menu-setting")}),a=Object(E.jsx)(k.a,{overlay:n,placement:"topRight",children:Object(E.jsx)(C.a,{className:"dropdown-toggle mt-2",shape:"square",size:45,icon:Object(E.jsx)(w.a,{src:e,preview:!1}),id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"})},"header-dropdown");return Object(E.jsx)(N.a,{className:"p-0 m-0",title:Object(E.jsx)(w.a,{width:45,height:45,src:L,preview:!1}),subTitle:Object(E.jsx)(I.a.Text,{strong:!0,children:Object(E.jsx)(p.b,{style:{color:"#ff4d4f"},to:"/",children:"Home"})}),extra:[Object(E.jsx)(I.a.Text,{strong:!0,children:t}),a]})}}]),n}(a.Component),B=Object(g.b)((function(t){return{app:t.app}}))(P),F=n(100),M=n(63),A=n(299),G=n(140),z=n(183),K=n(307),_=n(295),q=n(303),Q=n(296),W=n(312),X=n(313),H=n(187),J=(n(203),h.database());function V(t,e,n,a){J.ref(t).orderByChild(e).equalTo(n).on("value",(function(t){return a&&a(t.val())}))}function Z(t,e,n){var a=J.ref(t).push(e);return a.then((function(t){return n&&n(t)})),a.key}function Y(t,e,n){J.ref(t).child(e).remove().then((function(t){return n&&n(t)}))}n(292);var $=h.storage();function tt(t,e,n){$.ref(t).put(e).then((function(t){if(n){var e=t._delegate.metadata.fullPath;$.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function et(t,e,n){$.ref(t).putString(e,"data_url").then((function(t){if(n){var e=t._delegate.metadata.fullPath;$.ref(e).getDownloadURL().then((function(t){return n(t)}))}}))}function nt(t){$.ref(t).delete().catch((function(t){return console.log(t)}))}var at=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).delete=function(){var t=a.props.data.key;Y("/posts/",t,(function(){a.props.data.images.forEach((function(t){return nt(t.src)})),V("/comments/","postId",t,(function(t){for(var e in t)Y("/comments/",e)})),a.props.load(),z.b.info("Xo\xe1 th\xe0nh c\xf4ng")}))},a.state={comments:[],comment:{time:1624457156027,blocks:[],version:"2.22.0"}},a}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props.data,e=this.props.app.user.uid===t.uid;return Object(E.jsx)(F.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(M.a,{xl:10,lg:14,md:18,sm:22,xs:24,children:Object(E.jsx)(K.a,{actions:[],children:Object(E.jsx)(F.a,{children:Object(E.jsx)(M.a,{span:24,justify:"center",children:Object(E.jsx)(_.a,{author:Object(E.jsx)("p",{className:"author-name",children:t.author}),avatar:t.avatar,content:Object(E.jsxs)(E.Fragment,{children:[t.content,Object(E.jsx)(w.a.PreviewGroup,{children:Object(E.jsx)(q.a,{className:!0,children:t.images.map((function(t){return Object(E.jsx)("div",{className:"cover-img",children:Object(E.jsx)(w.a,{width:"100%",src:t.link})})}))})})]}),datetime:t.date,actions:[Object(E.jsx)(W.a,{className:"action-icon"}),Object(E.jsx)(p.b,{to:"/detail/".concat(t.key),children:Object(E.jsx)(X.a,{className:"action-icon"})}),Object(E.jsx)(E.Fragment,{children:e&&Object(E.jsx)(Q.a,{title:"B\u1ea1n c\xf3 mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y kh\xf4ng?",onConfirm:this.delete,okText:"C\xf3",cancelText:"Kh\xf4ng",children:Object(E.jsx)(H.a,{className:"action-icon"})})})]})})})})})})}}]),n}(a.Component),ct=Object(g.b)((function(t){return{app:t.app}}))(at),rt=n(174),st=n(314),it=n(315),ot=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).handleChange=function(t){t.saver.save().then((function(t){return a.setState({value:t})}))},a.reference=function(t){a.setState({editor:t})},a.submit=function(){a.props.submit&&(a.props.submit({comment:a.state.value,images:a.state.images}),a.state.editor.clear(),a.setState({images:[]}))},a.upload=function(t){if(a.state.images.length<9)for(var e=t.target.files,n=0;n<e.length;n++){var c=new FileReader;c.onload=a.load,c.readAsDataURL(e[n])}},a.load=function(t){if(a.state.images.length<9){var e=a.state.images;e.push({id:Date.now(),src:t.target.result}),a.setState({images:e})}},a.state={value:{},editor:{},images:[]},a}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=this.props.user;return Object(E.jsxs)(K.a,{actions:[Object(E.jsx)(st.a,{onClick:this.submit,className:"action-icon"},"send"),Object(E.jsx)(it.a,{onClick:function(){return document.getElementById("uploader".concat(t.props.id)).click()},className:"action-icon"},"img")],children:[Object(E.jsx)(_.a,{author:Object(E.jsx)("p",{className:"author-name",children:e.displayName}),avatar:Object(E.jsx)(w.a,{src:e.photoURL,preview:!1})}),Object(E.jsx)("div",{className:"editor-container border mb-2",children:Object(E.jsx)(rt.a,{onChange:this.handleChange,instanceRef:this.reference})}),Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(M.a,{span:20,children:Object(E.jsx)(w.a.PreviewGroup,{children:Object(E.jsx)(q.a,{className:!0,children:this.state.images.map((function(t){return Object(E.jsx)("div",{className:"cover-img",children:Object(E.jsx)(w.a,{width:"100%",src:t.src})})}))})})})}),Object(E.jsx)("input",{type:"file",id:"uploader".concat(this.props.id),accept:"image/png, image/gif, image/jpeg",onChange:this.upload,hidden:!0,multiple:!0})]})}}]),n}(a.Component),ut=n(177),jt=n.n(ut);function pt(t,e){var n=[],a=t.images;if(a)for(var c in a){var r=a[c];r.id=c,n.push(r)}return{key:e,uid:t.userId,date:t.date,author:t.author,avatar:Object(E.jsx)(p.b,{to:"/user/".concat(t.userId),children:Object(E.jsx)(C.a,{icon:Object(E.jsx)(w.a,{src:t.avatar,preview:!1})})}),content:Object(E.jsx)(jt.a,{data:t.content}),images:n}}function dt(t){var e=[];for(var n in t)if(t[n]){var a=pt(t[n],n);e.unshift(a)}return e}var lt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).loadMore=function(){a.setState({number:a.state.number+5}),a.load()},a.load=function(){var t,e,n;a.props.match.params.uid?(t="/posts/",e=a.props.match.params.uid,n=function(t){a.setState({posts:dt(t)})},J.ref(t).orderByChild("userId").equalTo(e).once("value").then((function(t){return n&&n(t.val())}))):function(t,e,n){J.ref(t).limitToLast(e).once("value").then((function(t){return n(t.val())}))}("/posts/",a.state.number,(function(t){a.setState({posts:dt(t)})}))},a.submit=function(t){var e=Z("/posts/",{userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment,date:(new Date).toDateString()},(function(){a.load(),t.images.forEach((function(t){var n="/image-posts/".concat(t.id,".png");et(n,t.src,(function(t){Z("/posts/".concat(e,"/images/"),{src:n,link:t}),a.load()}))}))}))},a.state={posts:[],number:5},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(t){t.match.params.uid!==this.props.match.params.uid&&this.load()}},{key:"render",value:function(){var t=this;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(F.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(M.a,{xl:10,lg:14,md:18,sm:22,xs:24,children:Object(E.jsx)(ot,{user:this.props.app.user,initValue:this.state.comment,submit:this.submit},Math.random())})}),Object(E.jsx)(A.b,{dataSource:this.state.posts,loadMore:Object(E.jsx)(F.a,{align:"center",children:Object(E.jsx)(M.a,{children:Object(E.jsx)(G.a,{onClick:this.loadMore})})}),renderItem:function(e){return Object(E.jsx)(ct,{data:e,load:t.load},e.key)}})]})}}]),n}(a.Component),ht=Object(g.b)((function(t){return{app:t.app}}))(lt),bt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).submit=function(t){var e=Z("/comments/",{postId:a.props.match.params.id,userId:a.props.app.user.uid,author:a.props.app.user.displayName,avatar:a.props.app.user.photoURL,content:t.comment,date:(new Date).toDateString()});t.images.forEach((function(t){var n="/image-comments/".concat(t.id,".png");et(n,t.src,(function(t){return Z("/comments/".concat(e,"/images/"),{src:n,link:t})}))}))},a.delete=function(){Y("/posts/",a.props.data.key,(function(){a.props.data.images.forEach((function(t){return nt(t.src)})),a.props.load(),z.b.info("Xo\xe1 th\xe0nh c\xf4ng")}))},a.state={post:{},comments:[],loading:!0},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t,e,n=this,a=this.props.match.params.id;t="/posts/".concat(a),e=function(t){t&&n.setState({loading:!1,post:pt(t,a)})},J.ref(t).on("value",(function(t){return e(t.val())})),V("/comments/","postId",a,(function(t){n.setState({comments:dt(t)})}))}},{key:"deleteComment",value:function(t,e){e.forEach((function(t){return nt(t.src)})),Y("/comments/",t),z.b.info("Xo\xe1 th\xe0nh c\xf4ng")}},{key:"render",value:function(){var t=this,e=this.state.post,n=this.props.app.user.uid===e.uid;return this.state.loading?"":Object(E.jsx)(F.a,{justify:"center",className:"mb-4",children:Object(E.jsx)(M.a,{xl:16,lg:18,md:20,sm:22,xs:24,children:Object(E.jsxs)(K.a,{children:[Object(E.jsx)(F.a,{children:Object(E.jsx)(M.a,{span:24,justify:"center",children:Object(E.jsx)(_.a,{author:e.author,avatar:e.avatar,content:Object(E.jsxs)(E.Fragment,{children:[e.content,Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(M.a,{span:20,children:Object(E.jsx)(w.a.PreviewGroup,{children:Object(E.jsx)(q.a,{className:!0,children:e.images.map((function(t){return Object(E.jsx)("div",{className:"cover-img",children:Object(E.jsx)(w.a,{width:"100%",src:t.link})})}))})})})})]}),datetime:e.date})})}),Object(E.jsx)(F.a,{children:Object(E.jsx)(M.a,{span:22,offset:1,children:this.state.comments.length>0&&Object(E.jsx)(A.b,{dataSource:this.state.comments,itemLayout:"horizontal",renderItem:function(e){var a=n||e.uid===t.props.app.user.uid;return Object(E.jsx)(A.b.Item,{children:Object(E.jsx)(M.a,{span:24,justify:"center",children:Object(E.jsx)(_.a,{author:e.author,avatar:e.avatar,content:Object(E.jsxs)(E.Fragment,{children:[e.content,Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(M.a,{span:20,children:Object(E.jsx)(w.a.PreviewGroup,{children:Object(E.jsx)(q.a,{className:!0,children:e.images.map((function(t){return Object(E.jsx)("div",{className:"cover-img",children:Object(E.jsx)(w.a,{width:"100%",src:t.link})})}))})})})})]}),datetime:a&&Object(E.jsx)(Q.a,{title:"B\u1ea1n c\xf3 mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y kh\xf4ng?",onConfirm:function(){return t.deleteComment(e.key,e.images)},okText:"C\xf3",cancelText:"Kh\xf4ng",children:Object(E.jsx)(H.a,{})})})})},Math.random())}})})}),Object(E.jsx)(F.a,{children:Object(E.jsx)(M.a,{span:22,offset:1,children:Object(E.jsx)(ot,{id:e.key,user:this.props.app.user,submit:this.submit},e.key)})})]})})})}}]),n}(a.Component),mt=Object(g.b)((function(t){return{app:t.app}}))(bt),Ot=n(135),ft=n(155),xt={user:{}},gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return t.user=e.data,Object(ft.a)(Object(ft.a)({},t),{},{user:e.data});default:return t}},vt=Object(Ot.a)({app:gt}),yt=Object(Ot.b)(vt),kt=n(152),Ct=n(301),wt=n(305),Nt=n(58),It=n(298),St=n(316),Tt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).finish=function(t){console.log(t.username),O(t.username,(function(){yt.dispatch(x(m())),z.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}))},t.upLoadFile=function(e){tt("/avatar/".concat(t.props.app.user.uid,".png"),e,(function(t){f(t,(function(){yt.dispatch(x(m())),z.b.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")}))}))},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this;return Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsx)(M.a,{children:Object(E.jsxs)(kt.a,{defaultActiveKey:"1",centered:!0,children:[Object(E.jsx)(kt.a.TabPane,{tab:"\u0110\u1ed5i t\xean ng\u01b0\u1eddi d\xf9ng",children:Object(E.jsx)(K.a,{style:{width:300,background:"none"},children:Object(E.jsxs)(Ct.a,{size:"middle",onFinish:this.finish,children:[Object(E.jsx)(Ct.a.Item,{name:"username",children:Object(E.jsx)(wt.a,{})}),Object(E.jsx)(Ct.a.Item,{wrapperCol:{offset:3,span:16},children:Object(E.jsx)(Nt.a,{type:"primary",htmlType:"submit",children:" C\u1eadp nh\u1eadt t\xean ng\u01b0\u1eddi d\xf9ng "})})]})})},"1"),Object(E.jsx)(kt.a.TabPane,{tab:"\u0110\u1ed5i \u1ea3nh \u0111\u1ea1i di\u1ec7n",children:Object(E.jsx)(K.a,{style:{width:300,background:"none"},children:Object(E.jsx)(F.a,{justify:"center",children:Object(E.jsxs)(M.a,{children:[Object(E.jsx)(C.a,{size:250,icon:Object(E.jsx)(w.a,{src:this.props.app.user.photoURL,preview:!1})}),Object(E.jsx)(F.a,{className:"pt-3",justify:"center",children:Object(E.jsx)(M.a,{children:Object(E.jsx)(It.a,{fileList:[],beforeUpload:function(e){return t.upLoadFile(e),!1},children:Object(E.jsx)(Nt.a,{type:"primary",icon:Object(E.jsx)(St.a,{}),children:"Upload file"})})})})]})})})},"2")]})})})}}]),n}(a.Component),Ut=Object(g.b)((function(t){return{app:t.app}}))(Tt),Dt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(E.jsx)(d.a,{to:"/acessDenied"}):Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.b,{exact:!0,path:"/",component:ht}),Object(E.jsx)(d.b,{exact:!0,path:"/user/:uid",component:ht}),Object(E.jsx)(d.b,{exact:!0,path:"/detail/:id",component:mt}),Object(E.jsx)(d.b,{exact:!0,path:"/setting",component:Ut})]})}}]),n}(a.Component),Lt=Object(g.b)((function(t){return{app:t.app}}))(Dt),Rt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(i.a)(this,n),a=e.call(this,t),function(t){var e=new h.auth.GoogleAuthProvider;b.signInWithPopup(e).then((function(e){return t&&t(e)}))}((function(){return a.props.history.push("/")})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),Et=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a,c;return Object(i.a)(this,n),a=e.call(this,t),c=function(){return a.props.history.push("/acessDenied")},b.signOut().then((function(t){return c&&c(t)})),a}return Object(o.a)(n,[{key:"render",value:function(){return""}}]),n}(a.Component),Pt=n(306),Bt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return null==this.props.app.user?Object(E.jsx)(Pt.a,{status:"403",title:"403",subTitle:"B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp!"}):Object(E.jsx)(d.a,{to:"/"})}}]),n}(a.Component),Ft=Object(g.b)((function(t){return{app:t.app}}))(Bt),Mt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(Pt.a,{status:"404",title:"404",subTitle:"Kh\xf4ng t\xecm th\u1ea5y trang y\xeau c\u1ea7u!",extra:Object(E.jsx)(Nt.a,{type:"primary",children:Object(E.jsx)(p.b,{to:"/",children:"V\u1ec1 trang ch\u1ee7"})})})}}]),n}(a.Component),At=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a,c;return Object(i.a)(this,n),a=e.call(this,t),c=function(t){yt.dispatch(x(t))},b.onAuthStateChanged((function(t){return c&&c(t)})),a}return Object(o.a)(n,[{key:"render",value:function(){return Object(E.jsx)(g.a,{store:yt,children:Object(E.jsx)(p.a,{children:Object(E.jsxs)(v.a,{className:"app",children:[Object(E.jsx)(v.a.Header,{className:"px-3",style:{backgroundColor:"white"},children:Object(E.jsx)(B,{})}),Object(E.jsx)(v.a.Content,{className:"p-3",children:Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.b,{exact:!0,path:"/login",component:Rt}),Object(E.jsx)(d.b,{exact:!0,path:"/logout",component:Et}),Object(E.jsx)(d.b,{exact:!0,path:"/acessDenied",component:Ft}),Object(E.jsx)(d.b,{path:"/",component:Lt}),Object(E.jsx)(d.b,{component:Mt})]})})]})})})}}]),n}(a.Component);s.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(At,{})}),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.37d7b231.chunk.js.map